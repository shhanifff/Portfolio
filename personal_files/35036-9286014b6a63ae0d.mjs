"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[35036],{17314:(e,t,a)=>{a.d(t,{Z:()=>d});var i,n,l=a(813653),r=a(861470),s=0,o=0;let d=function(e,t,a){var d=t&&a||0,u=t||Array(16),c=(e=e||{}).node||i,p=void 0!==e.clockseq?e.clockseq:n;if(null==c||null==p){var g=e.random||(e.rng||l.Z)();null==c&&(c=i=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==p&&(p=n=(g[6]<<8|g[7])&16383)}var m=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:o+1,y=m-s+(h-o)/1e4;if(y<0&&void 0===e.clockseq&&(p=p+1&16383),(y<0||m>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,o=h,n=p;var _=((268435455&(m+=122192928e5))*1e4+h)%4294967296;u[d++]=_>>>24&255,u[d++]=_>>>16&255,u[d++]=_>>>8&255,u[d++]=255&_;var f=m/4294967296*1e4&268435455;u[d++]=f>>>8&255,u[d++]=255&f,u[d++]=f>>>24&15|16,u[d++]=f>>>16&255,u[d++]=p>>>8|128,u[d++]=255&p;for(var x=0;x<6;++x)u[d+x]=c[x];return t||(0,r.Z)(u)}},894595:(e,t,a)=>{var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="610a35d46510240eb58e262c1909310c";let l=n},340359:(e,t,a)=>{var i,n,l;a.r(t),a.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[l={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},l,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};r.hash="833cd5d58bc1ac105444aa923e882675";let s=r},276971:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightCropperContainer_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"},{args:null,kind:"FragmentSpread",name:"StelaCutouts_pin"}],type:"Pin",abstractKey:null};i.hash="4c094b2f5fd711f63313c83eac8ecfc5";let n=i},643229:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightResultGrid_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],type:"Pin",abstractKey:null};i.hash="0e18466f59f891e9ea12d1c056d9f627";let n=i},200932:(e,t,a)=>{var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecipeMetadata_recipe",selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:i,storageKey:null}],storageKey:null}],type:"RecipeMetadata",abstractKey:null};n.hash="12f77507a9fdec344b44b7e659fa5ac1";let l=n},239e3:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};i.hash="d3343cbed0df46adae9a256f0fc6f167";let n=i},194081:(e,t,a)=>{var i,n,l,r,s;a.r(t),a.d(t,{default:()=>d});let o={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"RelatedProductsPageQuery",selections:[{alias:null,args:n=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,{args:null,kind:"FragmentSpread",name:"RelatedProductsPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"RelatedProductsPageQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[l],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[l,s],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},s],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"03eb828de8d2e9a4c8e1d3c0a94f7ea7fe306fd1717cc09995da1518d6549cf1",metadata:{},name:"RelatedProductsPageQuery",operationKind:"query",text:null}};o.hash="0a96a1ee859bcb7fedbf477060a5beb3";let d=o;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(o.default||o)},112649:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsPage_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchPageWithPinData_pin"}],type:"Pin",abstractKey:null};i.hash="91d05676e413b7b47653c2f8fa609093";let n=i},141027:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="395dd0c72ba79e629fa9cf482a4b73d6";let n=i},754980:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StelaCutout_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};i.hash="0b66eea622c037ef845cce3aa4cd2d46";let n=i},734501:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StelaCutouts_pin",selections:[{args:null,kind:"FragmentSpread",name:"StelaCutout_pin"}],type:"Pin",abstractKey:null};i.hash="aa969bf48facf77e13c5fc82deaa909e";let n=i},343015:(e,t,a)=>{var i,n,l,r,s,o,d,u,c,p,g,m,h,y,_,f,x,v,k,S;a.r(t),a.d(t,{default:()=>w});let b=(i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],n=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},c=[o={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],p=[u,d,o],g={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},h=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],_={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:y=[l],storageKey:null},{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[l,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},r,{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},s],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"orig")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"736x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},r,s,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[g,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[m,{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:h,storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:h,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[l,g,_,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:y,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[g,_,{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[f={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},v,l],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},m,{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:S=[d],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:S,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:S,storageKey:'images(spec:"170x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:S,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[k,g,{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},d,v],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[k,x,{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},f,v],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},v],storageKey:null},v],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"6cdf0568ef4791ef0418ee1fe441fb842acf50d89807fd6a9eb18334133da65a",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});b.hash="3904efe87290878b8559da8f51b4bd16";let w=b;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(b.default||b)},790602:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPage_pin"}],type:"Pin",abstractKey:null};i.hash="01839fc3bcd9cdaf206873364167d157";let n=i},572621:(e,t,a)=>{var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardBody_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};n.hash="80808af4cef3901a9ce9bec48f33c09b";let l=n},708537:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchProductFeedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};i.hash="b69967adff40ae068eb5d3aad8f106f3";let n=i},977546:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};i.hash="9d37ca13b584492c1fba958c00317b73";let n=i},5915:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useGetViewLog_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightResultGrid_pin"}],type:"Pin",abstractKey:null};i.hash="ecc8a2a34b852db42ada7b81f966ef5a";let n=i},196227:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchPageWithPinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchProductFeedResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchUnifiedResourceContainer_pin"}],type:"Pin",abstractKey:null};i.hash="559409b5cdf594ceadec1100a8e980f8";let n=i},270886:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchUnifiedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};i.hash="7074039637fc6e2b8dd0bdad128d63c8";let n=i},632349:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetInitialCropArea_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};i.hash="120ad104e33b94ab10be1098dc10d74b";let n=i},222267:(e,t,a)=>{var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetNormalizedPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};n.hash="3d7a6d04f923d00acfb2887f852aea16";let l=n},899854:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetViewLog_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="4d2dba5ab4f3957f62edf10d66e5a060";let n=i},853708:(e,t,a)=>{var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:i=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};n.hash="01a93671cde480baa2cfd8b781589acd";let l=n},890030:(e,t,a)=>{var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImageUrls_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};n.hash="b7ea441f2c20a68b323088ebe3847835";let l=n},892254:(e,t,a)=>{a.d(t,{$:()=>p,r:()=>g});var i=a(667294),n=a(342513),l=a(321329),r=a(340523),s=a(5859),o=a(757640),d=a(494125),u=a(785893);let{Provider:c,useHook:p}=(0,n.Z)("PinRep");function g({children:e}){let{isAuthenticated:t}=(0,s.B)(),{checkExperiment:a}=(0,r.F)(),[n,p]=(0,i.useState)(!0),[g,m]=(0,i.useState)(!1),h=(0,l.Z)(1000069),{anyEnabled:y}=a("ap_bmi_custom_activation_nux_revamp_mweb_v2",{dangerouslySkipActivation:!0}),_=(0,o.Z)(t&&y?{name:"UserStateResource",options:{state:"QUICK_SAVES_BOARD_ID"}}:null).data;(0,d.Z)(()=>{(async()=>{if(!t){p(!1);return}let e=await h.fetchAllExperiences();e&&e.payload&&e.payload.experiences?.[1000069]?.experience_id===500417&&e.payload.experiences?.[1000069]?.display_data.hide_footer?h.viewExperience(1000069,500417):p(!1),m(!0)})()});let f=(0,i.useMemo)(()=>({hasSimplifiedPinGridExpLoaded:g,hidePinRepFooter:n,quickSaveBoardId:_}),[g,n,_]);return(0,u.jsx)(c,{value:f,children:e})}},306320:(e,t,a)=>{a.d(t,{$:()=>i,v:()=>n});let i=50,n={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},160408:(e,t,a)=>{a.d(t,{Z:()=>u});var i=a(667294),n=a(883119),l=a(140017),r=a(340523),s=a(5859),o=a(923368),d=a(785893);function u({collapsed:e,displayViewState:t,forceTappableHeader:a,headerHeight:u,headerPaddingRight:c,headerPreview:p,heading:g,onClick:m,showArrow:h}){let y=(0,l.ZP)(),{checkExperiment:_}=(0,r.F)(),{isAuthenticated:f}=(0,s.B)(),x=f?_("auth_closeup_redesign").anyEnabled:_("unauth_closeup_redesign").anyEnabled,{isCloseupRelatedPinsAboveTheFoldEnabled:v}=(0,o.x4)();return(0,d.jsx)(i.Fragment,{children:a||null!==t?(0,d.jsx)(n.iP,{disabled:!h,onTap:m,children:(0,d.jsxs)(n.kC,{alignItems:"center",dataTestId:"collapsible-header",direction:"row",flex:"grow",height:u,justifyContent:"between",children:[(0,d.jsx)(n.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:x&&!v?"300":"400",children:g}),(0,d.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingRight:c}},direction:"row",display:"flex",children:[e&&p,h&&(v?(0,d.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transform:e?"rotate(0deg)":"rotate(180deg)",transition:v?"all 600ms cubic-bezier(.25,1,.5,1)":void 0}},children:(0,d.jsx)(n.hU,{accessibilityLabel:y._('Expand icon', 'accordion.actionButton', 'accessibility label on accordion'),"data-test-id":"collapse-button",icon:"arrow-down",size:"sm"})}):(0,d.jsx)(n.xu,{alignItems:"center","data-test-id":"collapse-button",display:"flex",justifyContent:"center",marginStart:p?-1:0,width:v?32:48,children:(0,d.jsx)(n.JO,{accessibilityLabel:y._('Expand icon', 'accordion.actionButton', 'accessibility label on accordion'),color:"default",icon:e?"arrow-down":"arrow-up"})}))]})]})}):(0,d.jsx)(n.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:"400",children:g})})}},230556:(e,t,a)=>{a.d(t,{n:()=>i});let i="300"},867013:(e,t,a)=>{a.d(t,{n:()=>i});let i=20},735382:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(624797);function n(e){let t=(0,i.mB)(e.search),a=parseInt(t.x??"",10),n=parseInt(t.y??"",10),l=parseInt(t.w??"",10),r=parseInt(t.h??"",10);return!function(...e){return e.every(Number.isInteger)}(a,n,l,r)?null:{x:a,y:n,w:l,h:r}}},430062:(e,t,a)=>{a.d(t,{Z:()=>c});var i=a(667294),n=a(883119),l=a(214877),r=a(140017),s=a(493538),o=a(71328),d=a(676554),u=a(785893);function c({alignStart:e,commerceData:t,isFilterOpened:a,isProductFeed:c,searchId:p,viewParameter:g,viewType:m,visualSearchFlashlightUnifiedResource:h}){let y=(0,r.ZP)(),{logContextEvent:_}=(0,l.v)(),[f,x]=(0,i.useState)(),[v,k]=(0,i.useState)(!1),S=(0,i.useRef)(null),b=(0,i.useRef)(null),w=(0,o.Z)(()=>{S.current&&x(S.current.getBoundingClientRect().y)},100);(0,i.useEffect)(()=>{b.current?.handleResize()},[a]),(0,i.useEffect)(()=>{if(!v)return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)}),(0,i.useEffect)(()=>{let e=window?.innerHeight||document.body?.clientHeight;!v&&f<e&&(k(!0),_({event_type:110,view_type:m,view_parameter:g}))},[f,_,v,k,m,g]);let{data:P,isFetching:F,fetchMore:j,isAtEnd:T}=h,C=(P?.results||[]).filter(e=>"pin"===e.type);return(0,u.jsxs)(n.xu,{"data-test-id":"visual-search-feed",children:[(0,u.jsx)(n.xu,{ref:S,children:(0,u.jsx)(s.Z,{isAtEndOfFeed:T,itemCount:(C||[]).length,children:(0,u.jsx)(n.Rk,{ref:b,align:e?"start":"center",items:C||[],loadItems:j,minCols:1,renderItem:({data:e,itemIdx:a})=>"pin"===e.type?(0,u.jsx)(d.ZP,{authDesktopSurface:c?"ShoppingDynamicHeightGrid":"SearchItem",auxData:{commerce_data:t},componentType:0,duploQueryRef:null,pin:e,pinId:e.id,slotIndex:a,viewData:{search_identifier:p},viewParameter:g,viewType:m}):null,scrollContainer:()=>window})})}),(0,u.jsx)(n.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,u.jsx)(n.$j,{accessibilityLabel:y._('Loading visual search results', 'visualSearch.spinner.label', 'Accessibility label for spinner when loading the visual search results'),show:F})})]})}},706308:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e){let{category_filters:t,domain_filters:a,price_filters:i}=e||{};return!!t||!!a||!!i}},8760:(e,t,a)=>{a.d(t,{Z:()=>d});var i=a(667294),n=a(706308),l=a(785049),r=a(256683),s=a(757640),o=a(325362);function d({resourceOptions:e,setFlashlightSearchId:t}){let[a,d]=(0,i.useState)(),[u,c]=(0,i.useState)(""),[p,g]=(0,i.useState)(),{cachedOneBarModules:m,setCachedOneBarModules:h}=(0,l.t)(),y=(0,s.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:e}:null);return(0,i.useEffect)(()=>{let{auxData:e}=y,t=e?.metadata?.one_bar_modules;t&&!m&&h((0,r.Z)(o.Z,!0)(t))},[y,h,m]),(0,i.useEffect)(()=>{let{data:e}=y,a=e?.search_identifier;a&&(t?t(a):c(a)),d(e)},[t,y]),(0,i.useEffect)(()=>{let{data:e}=y,t=e?.search_identifier,i=a?.search_identifier;!e||t&&i&&t===i||(0,n.Z)(a)||!(0,n.Z)(e)||g({category_filters:e.category_filters,domain_filters:e.domain_filters,price_filters:e.price_filters})},[p,a,y]),{filters:p,oneBarModules:m,searchId:u,setSearchId:c,visualSearchFlashlightUnifiedResource:y}}},82205:(e,t,a)=>{a.d(t,{Z:()=>y});var i=a(667294),n=a(883119),l=a(785893);function r({isTopRow:e,image:t}){return(0,l.jsxs)(n.zd,{height:e?217:168,wash:!0,width:e?236:117,children:[(0,l.jsx)(n.Ee,{alt:t.alt||"",fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url??""}),!!t.price&&(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:t.price})]})}var s=a(214877),o=a(205841),d=a(666472),u=a(223785),c=a(862249),p=a(259239),g=a(97538);let m={container:{borderRadius:`${u.Oc}px ${u.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},h=({images:e,firstImageIndex:t})=>{let a=t+1,i=t+2;return(0,l.jsxs)(n.xu,{overflow:"hidden",rounding:4,children:[(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:m.content},children:e.at(t)?(0,l.jsx)(r,{image:e[t],isTopRow:!0}):null}),e.length>i?(0,l.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,l.jsx)(r,{image:e[a]}),(0,l.jsx)(r,{image:e[i]})]}):null]})};function y({dangerouslySetActionUrl:e,query:t,story:a,slotIndex:r}){let u,y,_,f,x;let{logContextEvent:v}=(0,s.v)(),{action:k,id:S,objects:b,story_type:w,subtitle:P}=a,{text:F,url:j}=k||{},[T,C]=(0,i.useState)(!1),E=(0,i.useCallback)(()=>C(!0),[C]),I=(0,i.useCallback)(()=>C(!1),[C]),D=(b||[]).reduce((e,t)=>"pin"!==t.type?e:[...e,{domain:t.domain,image:{alt:t.title||t.description,height:t.images?.["474x"]?.height,url:t.images?.["474x"]?.url,width:t.images?.["474x"]?.width,price:(t.rich_summary?.products?.[0]||{}).offer_summary?.price}}],[]),R=(D[0]||{}).domain||void 0;["search_product_collage_story","shop_article_story"].includes(w)?(u=2,y=43,_={story_id:S,story_type:w,entered_query:t}):"shop_brand_story"===w||"shop_brand_affinity_story"===w?(u=1,y=92,R&&(_={story_type:w,commerce_data:JSON.stringify({domain:R})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(w)?(u=72,y=3050):"related_domain_collage"===w?(u=72,y=3455):"related_products_collage"===w&&(u=1,y=3177);let K=()=>v({event_type:101,element:372,component:200,view_type:u,view_parameter:y,aux_data:{story_type:w}}),L=P?4:2;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(w)&&k){let e=k.user;f=e&&(e.image_medium_url||e.image_large_url),x=e&&e.full_name}let A=e||j;if(!A)return null;let Z=(0,c.Z)({url:A})?"nofollow":"none";return(0,l.jsx)(d.F,{componentType:200,contextLogData:_||{},impressionType:"Story",loggingId:w,pinData:null,slotIndex:r,viewParameter:y,viewType:u,children:({impressionTrackerRef:e})=>(0,l.jsx)(n.xu,{ref:e,children:(0,l.jsx)(n.Tg,{href:A,onTap:K,rel:Z,children:(0,l.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:m.container},onMouseEnter:E,onMouseLeave:I,overflow:"hidden",position:"relative",children:[(0,l.jsx)(h,{firstImageIndex:["related_domain_collage","related_products_collage"].includes(w)?1:0,images:D.map(({image:e})=>e)}),(0,l.jsx)(n.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:L,rounding:"pill",children:(0,l.jsxs)(n.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[P?(0,l.jsx)(n.xu,{marginBottom:1,children:(0,l.jsx)(n.xv,{align:"start",color:"subtle",children:P.format})}):null,(0,l.jsx)(n.xv,{align:"start",weight:"bold",children:F})]})}),x&&f&&(0,l.jsx)(n.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,l.jsx)(o.qE,{name:x,outline:!0,size:"md",src:f})}),(0,l.jsx)(g.Z,{visibility:T?"visible":"none",children:(0,l.jsx)(p.Z,{additionalStyles:m.visualOverlay})})]})})})})}},785049:(e,t,a)=>{a.d(t,{p:()=>o,t:()=>s});var i=a(667294),n=a(342513),l=a(785893);let{Provider:r,useHook:s}=(0,n.Z)("VisualShopContext");function o({children:e}){let[t,a]=(0,i.useState)();return(0,l.jsx)(r,{value:{cachedOneBarModules:t,setCachedOneBarModules:a},children:e})}},582158:(e,t,a)=>{a.d(t,{Z:()=>y});var i,n=a(667294);a(167912);var l=a(616550),r=a(922725),s=a(625124),o=a(54977),d=a(340523),u=a(757640),c=a(520846),p=a(258194),g=a(706106),m=a(785893);let h=void 0!==i?i:i=a(276971);function y({customCropper:e,imageSignature:t,imageSize:a,initialCropArea:i,pinId:y,pinKey:_,requestParams:f,showAnimation:x,surfaceType:v,trafficSource:k,viewParameter:S,viewType:b}){let{checkExperiment:w}=(0,d.F)(),P=(0,o.Z)(h,_),F=(0,l.k6)(),j=w("web_cutouts").anyEnabled,{data:T}=(0,u.Z)(j?{name:"ApiResource",options:{url:`/v3/pins/${y}/segmentation/sam/`,data:{client:"visual_cutout",cleanup_masks:!0}}}:null),[C,E]=(0,n.useState)(void 0),[I,D]=(0,n.useState)(!1),[R,K]=(0,n.useState)({w:0,h:0,x:0,y:0}),[L,A]=(0,n.useState)(0),Z=(0,n.useMemo)(()=>(P.visualObjects??[]).filter(e=>e.isStela)||[],[P.visualObjects]);(0,n.useEffect)(()=>{A(Z.findIndex(e=>{var t;let{x:n,y:l,w:r,h:s}=e;return t=(0,c.Z)({cropArea:{x:n,y:l,w:r,h:s},scaledWidth:a.w??0,scaledHeight:a.h??0}),4>=Object.keys(i).reduce((e,a)=>e+Math.abs(i[a]-t[a]),0)}))},[a,i,Z]);let O=Z&&!!Z.length;(0,n.useEffect)(()=>{void 0===C&&(j?O&&T&&T?.bitmap_masks&&E(T.bitmap_masks.length>0):E(!1))},[j,T,O,C]);let M=({origCrop:e,cropSource:t,title:a})=>{let i=window.location.search,n=(0,p.Z)({cropArea:e,cropSource:t??6,requestParams:f,surfaceType:v,title:a,trafficSource:k});n!==i&&F.replace({pathname:window.location.pathname,search:n,state:{internalNavigation:!0}})};return(0,m.jsxs)(r.Z,{imageSize:a,initialCropArea:i,onChange:e??M,previewCropArea:R,showPreviewArea:!1,viewParameter:S,children:[!1===C&&O&&(0,m.jsx)(s.Z,{currentSpotlightIdx:L,handleSpotlightClick:t=>{let i=Z[t],{x:n,y:l,w:r,h:s}=i,o={origCrop:(0,c.Z)({cropArea:{x:n,y:l,w:r,h:s},scaledWidth:a.w??0,scaledHeight:a.h??0}),cropSource:i.isStela?4:1,trafficSource:k,title:i.title||""};e?e(o):M(o)},handleSpotlightHover:e=>{if(e!==L){D(!0);let{x:t,y:i,w:n,h:l}=Z[e];K((0,c.Z)({cropArea:{x:t,y:i,w:n,h:l},scaledWidth:a.w??0,scaledHeight:a.h??0}))}},handleSpotlightUnhover:()=>{D(!1)},imageSignature:t,imageSize:a,pinKey:P,showAnimation:x,viewParameter:S,viewType:b}),C&&!!T&&a.h&&a.w&&(0,m.jsx)(g.default,{cutoutsData:T,height:a.h,pinKey:P,surfaceType:v,width:a.w})]},JSON.stringify(i))}},223785:(e,t,a)=>{a.d(t,{Dv:()=>l,Ml:()=>r,Oc:()=>i,mv:()=>n});let i=16,n=4,l={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},r=120},513911:(e,t,a)=>{a.d(t,{I6:()=>n,Nv:()=>i,RZ:()=>l,ZG:()=>o,b9:()=>s,mV:()=>d,s0:()=>r});let i=44,n=24,l=446,r=.05,s=36,o=20,d=16},160567:(e,t,a)=>{a.d(t,{Pw:()=>i,SB:()=>n,ZP:()=>r,x9:()=>l});let i=80,n=56,l=e=>"phone"===e?n:i;function r(e,t){return t?0:l(e)}},743079:(e,t,a)=>{a.d(t,{DW:()=>l,I:()=>n,oo:()=>i,zI:()=>r});let i=e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t&&[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]},n=.18,l=(e,t,a)=>.2126*(e/255)**2.2+.7151*(t/255)**2.2+.0721*(a/255)**2.2,r=e=>{let t=e.replace("#",""),a=parseInt(t.substr(0,2),16);return(299*a+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3<155}},92785:(e,t,a)=>{a.d(t,{Z:()=>r,k:()=>i.kH});var i=a(135839),n=a(5859),l=a(785893);let r=({dateFormatType:e,useUTC:t=!0,value:a})=>(0,l.jsx)(n.LC,{children:n=>(0,i.ZP)(n.locale,a,e,t)})},135839:(e,t,a)=>{a.d(t,{A5:()=>l,ZP:()=>r,kH:()=>i});let i={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:"year_short_month_day_time_timezone",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},n=function(e){switch(e){case i.YEAR:return{year:"numeric"};case i.LONG:return{year:"numeric",month:"long",day:"numeric"};case i.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case i.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case i.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case i.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case i.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case i.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.MONTH_DAY:return{month:"long",day:"numeric"};case i.SHORT_MONTH:return{month:"short"};case i.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case i.DAY:return{day:"numeric"};case i.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case i.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case i.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case i.YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:return{month:"short",year:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.TIME:return{hour:"numeric",minute:"2-digit"};case i.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function l(){return -1!==Intl.DateTimeFormat.toString().indexOf("[native code]")}function r(e,t,a,i=!0){let s=n(a);return i&&(s.timeZone="UTC"),l()||(s.calendar="gregory"),new Intl.DateTimeFormat(e,s).format(t)}},541841:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(667294),n=a(973935);function l(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r extends i.Component{constructor(...e){super(...e),l(this,"observer",null),l(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){let e=n.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return i.Children.only(this.props.children)}}let s=r},401429:(e,t,a)=>{a.d(t,{Z:()=>h});var i=a(667294),n=a(545007),l=a(587703),r=a(25919),s=a(216167);let o=(e,t,a,i)=>(n,l)=>o=>{if(n&&n.id){let d=s.Z.create(e,{placed_experience_id:n.id,extra_context:{}});switch(t){case"dismissed":d.callDelete().then(()=>{o((0,r.fO)()),a&&i&&a({event_type:i,object_id_str:n.id.toString()})});break;case"completed":d.callUpdate().then(()=>{l||o((0,r.fO)()),a&&i&&a({event_type:i,object_id_str:n.id.toString()})});break;case"viewed":d.callUpdate().then(()=>{a&&i&&a({event_type:i,object_id_str:n.id.toString()})})}}},d=e=>o("UserExperienceCompletedResource","completed",e,6567),u=o("UserExperienceResource","dismissed"),c=e=>o("UserExperienceViewedResource","viewed",e,4503);var p=a(785893);function g(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends i.Component{constructor(...e){super(...e),g(this,"state",{hasCompleted:[],hasDismissed:[]}),g(this,"view",()=>{let{experience:e,isBackendExperience:t,targeting:a,viewExperience:i,viewExperienceObject:n}=this.props;e&&"viewed"!==e.status&&(t?(e.status="viewed",n(e)):a?i(e.placement_id,e.experience_id,a):i(e.placement_id,e.experience_id))}),g(this,"complete",e=>{let{completeExperience:t,completeExperienceObject:a,experience:i,isBackendExperience:n,preventRemoval:l,targeting:r}=this.props,s=e||1;if(i&&!this.state.hasCompleted.includes(i.experience_id)){let{placement_id:e,experience_id:o}=i||{},d=l||2===s;(1===s||d)&&e&&o&&(n?a(i,d):r?t(e,o,d,r):t(e,o,d),this.setState(e=>({hasCompleted:[...e.hasCompleted,o]})))}}),g(this,"dismiss",()=>{let{dismissExperience:e,dismissExperienceObject:t,experience:a,isBackendExperience:i,preventRemoval:n,targeting:l}=this.props,{placement_id:r,experience_id:s}=a||{};a&&!this.state.hasDismissed.includes(s)&&(i?t(a):l?e(r,s,!!n,l):e(r,s,!!n),this.setState(e=>({hasDismissed:[...e.hasDismissed,s]})))}),g(this,"isEligibleExperience",()=>{let{experience:e}=this.props;if(!e)return!1;let{eligibleIds:t,eligibleTypes:a,predicate:i}=this.props,{experience_id:n,type:l}=e;return t&&t.length?t.includes(n):a&&a.length?a.includes(l):!i||i(e)})}componentDidMount(){if(this.props.disableAutoView)return;let{experience:e}=this.props;e&&this.isEligibleExperience()&&this.view()}componentDidUpdate(e){if(this.props.disableAutoView)return;let t=e.experience,a=this.props.experience;a&&this.isEligibleExperience()&&(t&&t.experience_id===a.experience_id||this.view())}render(){let{children:e,experience:t,disableAutoView:a}=this.props;return t&&this.isEligibleExperience()?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...a?{view:this.view}:Object.freeze({})}):i.Children.only(e):null}}function h(e){let t=(0,n.v9)(({experiences:t})=>e.experience||(e.placementId?t[e.placementId]:void 0)),a=(0,n.I0)(),i=(0,r.be)(),s=(0,r.Am)(),o=(0,r.Ig)(),g=(0,l.Z)();return(0,p.jsx)(m,{...e,completeExperience:(e,t,n,l)=>a(i(e,t,n,!1,{},l)),completeExperienceObject:(e,t)=>a(d(g)(e,t)),dismissExperience:(e,t,i,n)=>a(s(e,t,i,void 0,n)),dismissExperienceObject:e=>a(u(e)),experience:t,viewExperience:(e,t,i)=>a(o(e,t,!1,!1,void 0,i)),viewExperienceObject:e=>a(c(g)(e))})}g(m,"defaultProps",{eligibleIds:[],eligibleTypes:[]})},619370:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var i=a(667294),n=a(883119),l=a(401429),r=a(785893);function s(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends i.PureComponent{constructor(...e){super(...e),s(this,"onScroll",()=>{let{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout(()=>{e(),this.dismissed=!0,this.timer=void 0},3e3))}),s(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){let{anchor:e,text:t,thumbnails:a,idealDirection:i}=this.props,l=a.slice(-3);return(0,r.jsx)(n.J2,{anchor:e,color:"white",idealDirection:i,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,r.jsxs)(n.xu,{alignContent:"center",display:"flex",justifyContent:"between",padding:3,width:"100%",children:[(0,r.jsx)(n.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,r.jsx)(n.xv,{color:"default",weight:"bold",children:t})}),(0,r.jsx)(n.xu,{display:"flex",marginEnd:-2,paddingX:2,children:l.map(e=>(0,r.jsx)(n.xu,{height:60,paddingX:1,width:50,children:(0,r.jsx)(n.zd,{height:60,rounding:2,children:(0,r.jsx)(n.Ee,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e))})]})})}}var d=a(76561);function u(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends i.Component{constructor(...e){super(...e),u(this,"dismissRef",(0,i.createRef)()),u(this,"state",{paused:!1}),u(this,"dismissCb",()=>{this.dismissRef.current?.()}),u(this,"handlePulsarClick",(e,t)=>{e?this.setState({paused:!0}):t()})}componentWillUnmount(){let{anchor:e}=this.props;this.timer&&clearTimeout(this.timer),e?.removeEventListener("click",this.dismissCb)}setDefaultPulsarTooltip(e){e.has_pulsar=null==e.has_pulsar||e.has_pulsar,e.has_tooltip=null==e.has_tooltip||e.has_tooltip}getText(e,t,a){return(t&&e.text.replace("{boardName}",t),a)?a(e):e.text}render(){let{anchor:e,customWrapper:t,experienceIds:a,boardTextOverride:s,flyoutSize:u,fontSize:c,hasFullWidthButton:p=!0,idealDirection:g,useMasonryFlyout:m,noClickToDismiss:h,onClickComplete:y,onClickDismiss:_,placementId:f,positionRelativeToAnchor:x,shouldSeeReturnToHomeFeedTooltipEdu:v=!1,shouldTimeoutDismiss:k,showCaret:S,textAlign:b,textOverflow:w,textOverrideFn:P,textWeight:F,customizedComplete:j,pulsarZIndex:T,advertiserId:C,dismissButtonLocation:E,dismissButtonColor:I,dismissButtonMarginTop:D}=this.props,R=t||(({children:e})=>m?(0,r.jsx)(n.mh,{children:e}):e);return(0,r.jsx)(l.Z,{eligibleIds:a,eligibleTypes:[8],placementId:f,targeting:C?{advertiserId:parseInt(C,10)}:null,children:({complete:t,dismiss:a,experience:l})=>{let{display_data:{scroll_to_dismiss:f,scroll_to_dismiss_delay_in_seconds:C=0,...K}}=l,L=f&&e,A=()=>{Z(),this.timer||(this.timer=setTimeout(a,1e3*C))},Z=()=>{L&&(window.removeEventListener("scroll",A),window.removeEventListener("touchmove",A))},O=()=>{Z(),t()};if(L&&(window.addEventListener("scroll",A),window.addEventListener("touchmove",A)),this.setDefaultPulsarTooltip(K),!K.has_pulsar&&!K.has_tooltip)return O(),null;k&&K.disappearTime&&K.disappearTime>0&&(this.timer=setTimeout(()=>(A(),null),K.disappearTime));let M=501041===l.experience_id||505086===l.experience_id;return K.has_tooltip&&!K.has_pulsar&&(this.dismissRef.current=A,e?.addEventListener("click",this.dismissCb)),(0,r.jsxs)(i.Fragment,{children:[K.has_pulsar&&(0,r.jsx)(d.Z,{anchor:e,leftOverride:M?342:void 0,onTouch:()=>this.handlePulsarClick(K.has_tooltip,O),paused:this.state.paused,topOverride:M?-5:void 0,zIndex:T&&T.index()}),K.has_tooltip&&(!K.has_pulsar||this.state.paused)&&(K.thumbnail_urls?(0,r.jsx)(o,{anchor:e,dismiss:A,idealDirection:g||"down",text:K.text,thumbnails:K.thumbnail_urls}):(0,r.jsx)(R,{children:(0,r.jsx)(n.J2,{_deprecatedShowCaret:S,anchor:e,color:"deprecatedBlue",idealDirection:g||"down",onDismiss:h?()=>{}:A,positionRelativeToAnchor:!m&&x,shouldFocus:!1,size:u,children:(0,r.jsxs)(n.xu,{column:12,paddingX:v?5:3,paddingY:3,children:[(0,r.jsxs)(n.xv,{align:"right"===b?"end":b,color:"inverse",overflow:w,size:c,weight:F||"bold",children:[this.getText(K,s,P),K.secondary_cta_link&&(0,r.jsx)(n.xu,{display:"inlineBlock",marginStart:1,children:(0,r.jsx)(n.xv,{color:"inverse",size:c,weight:"bold",children:(0,r.jsx)(n.rU,{display:"inlineBlock",href:K.secondary_cta_link.url,target:"blank",underline:"hover",children:K.secondary_cta_link.text})})})]}),K.sub_text&&(0,r.jsx)(n.xu,{paddingY:2,children:(0,r.jsx)(n.xv,{color:"inverse",size:c,children:K.sub_text})}),(K.dismiss_button_text||K.complete_button_text)&&(0,r.jsxs)(n.xu,{alignItems:"center",display:"flex",justifyContent:E||"start",marginTop:D||2,children:[K.dismiss_button_text&&(0,r.jsx)(n.xu,{column:6,marginEnd:1,children:(0,r.jsx)(n.zx,{color:I||"blue",fullWidth:p,onClick:()=>{_&&_(),A()},size:"md",text:K.dismiss_button_text})}),K.complete_button_text&&(0,r.jsx)(n.xu,{column:K.dismiss_button_text?6:12,children:j?(0,r.jsx)(n.iP,{fullHeight:!0,onTap:()=>{O(),y&&y()},rounding:2,children:(0,r.jsx)(n.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"10px"}},display:"flex",justifyContent:"center",padding:2,rounding:2,children:(0,r.jsx)(n.xv,{color:"shopping",weight:"bold",children:K.complete_button_text})})}):(0,r.jsxs)(n.kC,{justifyContent:"center",children:[K.complete_button_cta_url&&(0,r.jsx)(n.ZP,{color:"white",fullWidth:p,href:K.complete_button_cta_url,onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),O(),y&&y()},size:"md",target:K.complete_button_cta_url?"blank":null,text:K.complete_button_text}),!K.complete_button_cta_url&&(0,r.jsx)(n.zx,{color:"white",fullWidth:p,onClick:()=>{O(),y&&y()},size:"md",text:K.complete_button_text})]})})]})]})})}))]})}})}}u(c,"defaultProps",{fontSize:"300",positionRelativeToAnchor:!0})},76561:(e,t,a)=>{a.d(t,{Z:()=>o});var i=a(883119),n=a(667294),l=a(785893);let r=(e,t,a,i)=>({horizontalOffset:-(i/2-t/2),verticalOffset:-(a/2-e/2)});function s({anchor:e,children:t,zIndex:a,leftOverride:s,topOverride:o}){let d=(0,n.useRef)(null),[u,c]=(0,n.useState)(0),[p,g]=(0,n.useState)(0),{height:m,width:h}=e.getBoundingClientRect();return(0,n.useEffect)(()=>{let{current:t}=d;if(e&&t){let{height:e,width:a}=t.getBoundingClientRect(),{horizontalOffset:i,verticalOffset:n}=r(m,h,e,a);c(i),g(n)}}),(0,l.jsx)(i.xu,{ref:d,dangerouslySetInlineStyle:{__style:{left:s||u,top:o||p}},"data-test-id":"center-box",position:"absolute",zIndex:a?new i.Ry(a):void 0,children:t})}let o=function(e){let{anchor:t,leftOverride:a,onTouch:n,onMouseEnter:r,paused:o,size:d,topOverride:u,zIndex:c}=e;return t?(0,l.jsx)(s,{anchor:t,leftOverride:a,topOverride:u,zIndex:c,children:(0,l.jsx)(i.iP,{fullWidth:!1,onMouseEnter:r,onTap:({event:e})=>n(e),rounding:"circle",children:(0,l.jsx)(i.o3,{paused:o,size:d})})}):null}},321329:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(667294),n=a(703404),l=a(839391),r=a(5859);function s(e){let{mountedPlacements:t,completeExperience:a,dismissExperience:s,experiences:o,fetchAllExperiences:d,fetchAllExperiencesMulti:u,fetchExperienceForPlacements:c,triggerExperimentsForPlacement:p,viewExperience:g}=(0,l.Z)(),{isBot:m}=(0,r.B)(),h=e&&!m?(0,n.MQ)(o,t,e):null;return(0,i.useMemo)(()=>({completeExperience:a,dismissExperience:s,experienceForPlacement:h,fetchAllExperiences:d,fetchAllExperiencesMulti:u,fetchExperienceForPlacements:c,triggerExperimentsForPlacement:p,viewExperience:g}),[a,s,h,d,u,c,p,g])}},59545:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(667294);function n(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends i.Component{constructor(...e){super(...e),n(this,"ref",(0,i.createRef)()),n(this,"observer",null),n(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){this.ref&&this.ref.current&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.ref.current))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.ref.current),delete this.observer)}render(){return this.props.children(this.ref)}}let r=l},681508:(e,t,a)=>{a.d(t,{Rq:()=>l,Vf:()=>r,jd:()=>s,oy:()=>o,yR:()=>c});var i=a(658583),n=a(622541);let l=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,r=28,s=e=>window.innerHeight>=748&&l(e),o=()=>"undefined"!=typeof window&&!!window.navigator&&(/iPad/.test(navigator.platform)||"MacIntel"===navigator.platform&&"ontouchend"in document&&Math.min(window.screen.width,window.screen.height)>=700),d=()=>{i.t8(n.oj,String(!0),(0,i.kZ)(n.oj))},u=()=>!!i.U2(n.oj),c=()=>{let e=o();e!==u()&&(e?d():i.zN(n.oj.name),"undefined"!=typeof window&&window.location.reload())}},422210:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e){if(!e)return!1;let t=new Date(e);return t.setDate(t.getDate()+28),new Date().getTime()<t.getTime()}},201417:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e){return"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)}},179425:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var i=a(883119),n=a(213377),l=a(681508),r=a(403862),s=a(5859),o=a(785893);let d=({children:e,dataLayoutShiftBoundaryId:t,hasFixedHeader:a=!1,hasGutter:d=!0,height:u,showKeychainError:c=!1,useViewport:p=!1})=>{let g=(0,s.B)(),m=(0,l.jd)(g.userAgent.platform)?l.Vf:0;return(0,o.jsx)(i.xu,{"data-layout-shift-boundary-id":t||"PageContainer",height:p?`calc(100vh - ${m}px)`:u,paddingX:d?n.D6:void 0,paddingY:a||c?void 0:3,children:(0,o.jsx)(r.C,{value:!!d,children:e})})}},403862:(e,t,a)=>{a.d(t,{C:()=>l,V:()=>r});var i=a(667294);let n=(0,i.createContext)(!1),l=n.Provider,r=()=>(0,i.useContext)(n)},891162:(e,t,a)=>{a.d(t,{Q6:()=>u,ZP:()=>s,qe:()=>o,yU:()=>d});var i=a(520893);let n=(e,t)=>e.length===t.length&&e.every((e,a)=>e===t[a]),l=e=>e;function r(e,t=n,a=l){return function(i){let n=[];return function(...l){let r=n.find(e=>t(e.args,a(l)));if(r)return r.result;let s=i(...l);return n.push({args:a(l),result:s}),e&&n.length>e&&n.shift(),s}}}let s=r(),o=r(1),d=r(void 0,n,e=>[JSON.stringify(e)]),u=r(0,(e,t)=>e.length===t.length&&e.every((e,a)=>(0,i.Z)(e,t[a])))},483085:(e,t,a)=>{a.d(t,{Z:()=>function e(t,a=!1){return n=>{if(!(0,i.Z)(n))return a&&Array.isArray(n)?n.map(e(t,a)):n;let l={};return Object.keys(n).forEach(r=>{let s=t(n[r],r);(0,i.Z)(n[r])||a&&Array.isArray(n[r])?l[s]=e(t,a)(n[r]):l[s]=n[r]}),l}}});var i=a(201417)},256683:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(483085);function n(e,t=!1){let a=(t,a)=>e(a);return e=>(0,i.Z)(a,t)(e)}},189469:(e,t,a)=>{a.d(t,{r:()=>i});function i(e,t,a){return!!(e&&e.trim().length>0&&t&&!a)}},391884:(e,t,a)=>{a.d(t,{Z:()=>i});function i({embedSrc:e,embedType:t,imagesUrls:a,preferredResolution:i,excludeOriginals:n}){if(!e&&!t&&!a)return"";if("gif"===t)return e||"";if(!a)return"";if(i){let e="474x"===i&&a["474x"]||"236x"===i&&a["236x"]||a["736x"];if(e)return e}let l=Object.keys(a).reduce((e,t)=>{try{let i=t.split("x")[0];if(Number.isNaN(Number(i)))return{...e,[t]:a[t]};return{...e,[i]:a[t]}}catch(t){return e}},{}),r=Object.keys(l);return n&&"orig"===r[r.length-1]&&r.pop(),l[r.pop()]||""}},567344:(e,t,a)=>{a.d(t,{eg:()=>r,kt:()=>h,rw:()=>g,fs:()=>u,eK:()=>c,Ly:()=>p,BY:()=>m,bN:()=>y,RC:()=>o,EU:()=>d});let i=/\s\s+/g,n=e=>e.replace(i," ");var l=a(564855);let r=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_description","is_sensitive_rich_pin_title","is_sensitive_board_title"])),s=e=>"string"==typeof e?e:"",o=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,d=(e,t)=>e?e.trim().length>t?(0,l.ZP)(e.trim(),t).trim():e.trim():"",u=({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l})=>{let r=l||e,s=d(t,200);return s||a||i||(n&&r?r:null)},c=e=>{let{richSummaryDisplayName:t}=e,a=e.pinJoinVisualAnnotation||[],i=e.pinJoinAnnotationsWithLinks||{},r=e.richMetadataDescription||"",s=e.closeupUnifiedDescription||"",o=a.map(e=>(i||{})[e]||{name:e,url:""}),d="",u=(t||"").toLocaleLowerCase().trim(),c=r.toLocaleLowerCase().trim(),p=s.toLocaleLowerCase().trim();return s&&s.length>3&&p!==u?d=s:r&&r.length>3&&c!==u&&(d=r),d&&(d=n((0,l.ZP)(d,496)).trim()),{description:d,annotationsWithLinks:o}},p=({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l,pinJoinVisualAnnotation:s,seoNoindexReason:o,seoTitle:d})=>r.has(o??"")?d:u({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l})||s?.[0]||e,g=(e,t,a,i,n)=>{let l=s(e).trim(),r=(e,t)=>t&&t.length>0?`${e} ${t.join(", ")}`:e;return i&&i.trim().length?r(i.trim(),a):n&&n.trim().length?n.trim():l?r(l,a):a?a.join(", "):""},m=e=>`/pin/${e}/`,h=(e,t)=>{let a=`Pinterest video from ${t}: `.concat(e);return""===t?e:a},y=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:m(e)},777609:(e,t,a)=>{a.d(t,{Z:()=>s});var i,n=a(667294);a(167912);var l=a(54977);let r=void 0!==i?i:i=a(222267);function s({pinKey:e,maxWidth:t}){let a=(0,l.Z)(r,e),i=a?.imageSpec_564x||a?.imageSpec_736x||a?.imageSpec_orig||a?.imageSpec_474x||a?.imageSpec_236x,s=i?.width||1,o=i?.height||1,d=i?.url||"",u=function(e,t,a=564){return e>a&&(t*=a/e,e=a),{width:e,height:t}}(s,o,t);return{getNormalizedPinImage:(0,n.useCallback)(()=>({width:u.width,height:u.height,url:d}),[u.height,u.width,d])}}},781705:(e,t,a)=>{a.d(t,{Z:()=>s}),a(167912);var i,n=a(54977),l=a(140017);let r=void 0!==i?i:i=a(853708),s=e=>{let t;let a=(0,l.ZP)(),i=(0,n.Z)(r,e),s=i.trackedLink||i.link||i.imageSpec_orig&&i.imageSpec_orig.url,{richMetadata:o,richSummary:d}=i,u=a._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation');return o&&o.products&&o.products[0]&&o&&o.products[0].name&&o.products[0].offerSummary&&(u=a._('Product sold by ', 'pin annotation', 'pin annotation'),t=(o.products?.[0]||void 0)?.offerSummary),!t&&d&&d&&d.products&&d.products[0]&&d&&d.products[0].name&&d.products[0].offerSummary&&(u=a._('Product sold by ', 'pin annotation', 'pin annotation')),{pinLink:s,pinCreditPrefix:u,pinTitle:i.closeupUnifiedTitle,pinDescription:i.closeupUnifiedDescription,pinCategory:i.category}}},661428:(e,t,a)=>{a.d(t,{Z:()=>r}),a(167912);var i,n=a(54977);let l=void 0!==i?i:i=a(890030),r=e=>{let t=(0,n.Z)(l,e);return[["60x60",t?.imageSpec_60x60],["136x136",t?.imageSpec_136x136],["170x",t?.imageSpec_170x],["236x",t?.imageSpec_236x],["474x",t?.imageSpec_474x],["564x",t?.imageSpec_564x],["736x",t?.imageSpec_736x],["600x315",t?.imageSpec_600x315],["orig",t?.imageSpec_orig]].reduce((e,[t,a])=>a?{...e,[t]:a.url}:e,{})}},414131:(e,t,a)=>{a.d(t,{Z:()=>i});function i({hasPin:e,hasPinRichMetadata:t,hasPinRichMetadataProducts:a,hasPinRichMetadataArticle:i,hasPinRichMetadataRecipe:n,hasPinStoryPinData:l}){if(e){if(t)return a?144:i?141:n?145:139;if(l)return 157}return 140}},686769:(e,t,a)=>{a.d(t,{A:()=>r,Z:()=>s});var i=a(667294),n=a(883119),l=a(785893);let r=({fill:e})=>{let t="half"===e?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(n.xu,{position:"absolute",children:(0,l.jsx)(n.JO,{accessibilityLabel:"",color:"default",icon:"star-half",size:12})}),(0,l.jsx)(n.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:12})]}):(0,l.jsx)(n.JO,{accessibilityLabel:"",color:"full"===e?"default":"subtle",icon:"star",size:12});return(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},"data-test-id":`rating-star-${e}`,display:"inlineBlock",children:t})};function s({max_rating:e,rating:t}){var a;let i=[],s=parseFloat(e)||5,o=5*(a=(a=parseFloat(t)||0)<=s?a:s)/s;if(Number.isNaN(o))return null;let d=Math.floor(o),u=o-d;return[...Array(d).keys()].forEach(e=>i.push((0,l.jsx)(r,{fill:"full"},e))),u>=.75?i.push((0,l.jsx)(r,{fill:"full"},i.length)):u>=.25&&i.push((0,l.jsx)(r,{fill:"half"},i.length)),[...Array(5-i.length).keys()].forEach(()=>i.push((0,l.jsx)(r,{fill:"empty"},i.length))),(0,l.jsx)(n.xu,{display:"inlineBlock",position:"relative",width:15*s,children:i})}},496782:(e,t,a)=>{a.d(t,{Z:()=>g});var i=a(667294),n=a(883119),l=a(230556),r=a(140017),s=a(427514),o=a(785893);function d({category:e,ingredients:t,textSize:a="300"}){return(0,o.jsxs)(n.xu,{children:[e&&(0,o.jsx)(n.xu,{children:(0,o.jsx)(n.xv,{size:a,weight:"bold",children:e})}),(0,o.jsx)("ul",{children:t.map((e,t)=>(0,o.jsx)("li",{"data-test-id":"recipe-ingredient",itemProp:"recipeIngredient",children:(0,o.jsx)(n.xu,{marginTop:1,children:(0,o.jsxs)(n.xv,{size:a,children:["• ",e.amt||null," ",e.name]})})},t))})]})}var u=a(177021),c=a(153896),p=a(923368);function g({recipeProps:e,marginOverrides:t}){var a;let g=(0,r.ZP)(),{image:m,name:h,categorizedIngredients:y}=e.recipe,{isCloseupRelatedPinsAboveTheFoldEnabled:_,peekCloseupEnabled:f}=(0,p.x4)(),x=0;if(y&&y.length){let e=[];y.forEach(t=>(x+=t.ingredients.length,e.push(t.ingredients)))}let v=f?(a=x,(0,s.Z)(g.ngettext('{{ count }} Ingredient', '{{ count }} Ingredients', a, 'closeup.recipePin.heading.ingredientCount', 'Ingredient count on a Pin. count: number of ingredients'),{count:a.toString()})):g._('Ingredients', 'Ingredients title and count in closeup recipe description', 'Ingredients title and count in closeup recipe description');return(0,o.jsx)(n.xu,{marginBottom:f?4:void 0,marginTop:_?2:8,children:(0,o.jsxs)(u.Z,{itemScope:!0,itemType:"https://schema.org/Recipe",children:[(0,o.jsx)("meta",{content:h,itemProp:"name"}),(0,o.jsx)("meta",{content:m,itemProp:"image"}),(0,o.jsx)(c.Z,{heading:v,children:(0,o.jsx)(n.xu,{marginTop:_?void 0:4,children:y.map(({category:e,ingredients:a},r)=>{let s=`ingredient-${r}`;return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(n.xu,{marginBottom:t?.ingredientMarginBottom||4,children:(0,o.jsx)(d,{category:e,ingredients:a,textSize:_?"200":l.n})})},s)})})})]})})}},230077:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(667294),n=a(545007),l=a(839967),r=a(569372);function s(e){let{name:t,optionsKey:a}=e,s=t===l.fY,o=(0,r.bC)(),d=o?.get(t,a);if(d)throw d;let u=e=>e[t]?.[a],c=(0,n.v9)(({resources:e})=>u(e)?.nextBookmark),p=(0,n.v9)(({resources:e})=>u(e)?.data),g=(0,n.v9)(({resources:e})=>u(e)?.auxData),m=(0,n.v9)(({resources:e})=>u(e)?.error),h=(0,i.useRef)({auxData:void 0,data:void 0,error:void 0,isAtEnd:!1,nextBookmark:void 0});if(s)return h.current;let y={auxData:g,data:p,error:m,isAtEnd:c===l.qx,nextBookmark:c};return(y.auxData!==h.current.auxData||y.data!==h.current.data||y.error!==h.current.error||y.isAtEnd!==h.current.isAtEnd||y.nextBookmark!==h.current.nextBookmark)&&(h.current=y),h.current}},7829:(e,t,a)=>{a.d(t,{Z:()=>d});var i=a(757640),n=a(149722),l=a(616550),r=a(5859),s=a(554786),o=a(624797);function d({getOptions:e,checkExperiments:t,disableFetch:a,...d}){let{args:u,fetchDisabled:c}=function({checkExperiments:e,disableFetch:t,viewer:a}){let i=(0,l.TH)(),n=(0,l.$B)(),d=(0,r.B)(),u=function({advertiser:e,deviceType:t,location:{pathname:a,search:i},inviteCode:n,match:{params:l,path:r},viewer:s}){return{advertiser:e,deviceType:t,routeData:{inviteCode:n,matchPath:r,params:l,parsedSearch:(0,o.mB)(i),pathname:a,search:i},user:{country:s.country||void 0,id:s.id||void 0,isAuth:s.isAuth,isEmployee:!!s.isEmployee,isPartner:!!s.isPartner,username:s.username||void 0}}}({advertiser:d.advertiser,deviceType:(0,s.Mq)(d),location:i,match:n,viewer:a,inviteCode:d.inviteCode??""}),c=!!t&&t(u),p=!!c||!e||e(d.experimentsClient);return{args:u,fetchDisabled:c||!p}}({checkExperiments:t,disableFetch:a,viewer:function(){let e=(0,n.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee,isPartner:!!e.isPartner,username:e.username||void 0}}()}),p=e?e(u):void 0;return(0,i.Z)(c?null:{options:p,...d})}},177021:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(785893);let n=e=>{let t=e.itemType?{itemScope:!0,itemType:e.itemType}:{};return(0,i.jsx)("div",{"data-test-id":"rich-pin-information",...t,children:e.children||null})}},447479:(e,t,a)=>{a.d(t,{i:()=>i});let i={AC:"ac",AUTOCOMPLETE:"autocomplete",BOARD:"blp",CONTENT_TYPE_FILTER:"content_type_filter",DIRECT_NAVIGATION:"direct_navigation",FILTER:"filter",GUIDED_SEARCH_ENTRY:"guided_search_entry",GUIDED_SEARCH_LANDING:"guided_search_landing",HASHTAG_CLOSEUP:"hashtag_closeup",HASHTAG_PINREP:"hashtag_pinrep",HOMEFEED_BUBBLE:"homefeed_bubble",HUB_PAGE:"hub_page",IDEAS_ROOT:"ideas_root",IMAGE_ONLY_ATTRIBUTION:"image_only_attribution",LANDING_PAGE_STORY:"landing_page_story",NO_RESULTS_SEARCH_STORY:"no_results_search_story",PRODUCT:"product",REMOVE:"remove",RS:"rs",SHOPPING_FILTER:"shopping_filter",SITELINKS_SEARCHBOX:"sitelinks_searchbox",SLP_REC_CURATED:"slp_rec_curated",SLP_REC_TRENDING:"slp_rec_trending",SRS:"srs",STRUCTURED_GUIDE:"structured_guide",TRENDING:"trending",TYPED:"typed",TYPO_AUTO_ORIGINAL:"typo_auto_original",TYPO_SUGGESTION:"typo_suggestion",UNKNOWN:"Unknown",VANILLA_GUIDE:"guide",URECS:"urecs",VIDEO:"video"}},156725:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e){return e.toLowerCase().charAt(0).toUpperCase()+e.toLowerCase().slice(1)}},564855:(e,t,a)=>{a.d(t,{ZP:()=>n,mP:()=>i});let i="…";function n(e,t=80,a=i,l=!1){let r;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||l)r=e.substring(0,t);else{let a=e.lastIndexOf(" ",t);r=e.substring(0,a)}return(r=r.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+a}},627408:(e,t,a)=>{a.d(t,{Z:()=>x});var i=a(667294),n=a(541841),l=a(901855),r=a(59545),s=a(340523),o=a(5859),d=a(520893),u=a(503325);let{Provider:c,useMaybeHook:p}=(0,a(342513).Z)("timeSpentContext");var g=a(28449),m=a(19447),h=a(785893);function y(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _ extends i.Component{constructor(e){super(e),y(this,"componentWillUnmount",()=>{this.unregisterComponent()}),y(this,"getContext",()=>{let{clientTrackingParams:e,component:t,element:a,objectId:i,timeSpentContext:n,view:l,viewParameter:r}=this.props;return{view:l||n?.view,viewParameter:r||n?.viewParameter,component:t||n?.component,element:a,objectId:i||n?.objectId,clientTrackingParams:e||n?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),y(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),y(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){let t=e.getGrandparentUuid();if(t)return t}return e&&e.getParentUuid?e.getParentUuid():void 0}),y(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),y(this,"getTimedPair",()=>this.state.timedPair),y(this,"setTimedPair",(e,t)=>{this.setState({timedPair:e},()=>{t&&t()})}),y(this,"isRegistered",!1),y(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),y(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),y(this,"handleVisibilityChange",e=>{let{intersectionRatio:t}=e[0],{bottom:a,left:i,right:n,top:l}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===a&&0===i&&0===n&&0===l?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new u.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,d.Z)(e.auxData,this.props.auxData)&&(0,d.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e,intersectionObserverExpEnabled:t}=this.props;return t?(0,h.jsx)(c,{value:this.getContext(),children:(0,h.jsx)(r.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:t=>(0,i.cloneElement)(i.Children.only(e),{ref:t})})}):(0,h.jsx)(c,{value:this.getContext(),children:(0,h.jsx)(n.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:i.Children.only(e)})})}}function f(e){let t=(0,l.Hv)(),a=p(),n=(0,g.Z)(),r=(0,m.H0)(),{requestIdentifier:d="",isAuthenticated:u}=(0,o.B)(),c={app_instance_id:d.slice(0,8),...e.auxData??{}},{checkExperiment:y}=(0,s.F)(),f=y(u?"web_intersection_observer_migration_auth":"web_intersection_observer_migration_unauth").anyEnabled;return(0,i.useEffect)(()=>{n?.setHistoryStackContext(t)},[t,n]),(0,i.useEffect)(()=>{n?.setPins(r??{})},[r,n]),n?(0,h.jsx)(_,{...e,auxData:c,intersectionObserverExpEnabled:f,timeSpentContext:a,timeSpentManager:n,children:e.children}):e.children}f.displayName="TimeSpent";let x=f},503325:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(172045),n=a(17314);function l(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let r="undefined"!=typeof window&&window.performance&&window.performance.now?()=>Math.floor(1e6*window.performance.now()):()=>1e6*Date.now(),s=class{constructor(e){l(this,"start",()=>(this.startTime=r(),this.startTime)),l(this,"end",()=>(this.endTime=r(),this.duration=this.startTime?this.endTime-this.startTime:null,this.duration));try{this.uuid=(0,i.Z)()}catch(e){this.uuid=(0,n.Z)()}e&&Object.assign(this,e)}}},28449:(e,t,a)=>{a.d(t,{$:()=>i,Z:()=>l});let{Provider:i,useMaybeHook:n}=(0,a(342513).Z)("TimeSpentManagerContext"),l=n},460270:(e,t,a)=>{a.d(t,{Z:()=>i});let i=e=>e?"string"==typeof e?e:e.pathname?e.pathname:"":""},689390:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e){if((e||"").includes("--")){let t=e.split("--"),a=t.pop();return{text:t.join("--"),pinId:a}}return{text:"",pinId:e}}},250790:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e){let t;switch(e){case 1:t=1;break;case 2:t=2;break;case 3:t=3;break;case 4:t=4;break;case 5:t=5;break;case 6:t=6}return t}},40770:(e,t,a)=>{a.d(t,{Z:()=>i});function i({cropSource:e,surfaceType:t,isProductPage:a}){return"stl"===t&&4===e?"shop_the_look_module":a?"feed_module":null}},258194:(e,t,a)=>{a.d(t,{Z:()=>i});function i({cropArea:e,cropSource:t,requestParams:a,searchQuery:i,surfaceType:n,title:l,trafficSource:r}){let s=[];if(e){let{x:t,y:a,w:i,h:n}=e;t>=0&&a>=0&&i>=0&&n>=0&&s.push(`x=${t}`,`y=${a}`,`w=${i}`,`h=${n}`)}return t&&s.push(`cropSource=${t}`),n&&s.push(`surfaceType=${n}`),l&&s.push(`full_feed_title=${encodeURIComponent(l)}`),i&&s.push(`q=${i}`),r&&"unknown"!==r&&s.push(`rs=${r}`),a&&s.push(`requestParams=${encodeURIComponent(a)}`),s.length?`?${s.join("&")}`:""}},755453:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(258194);function n({cropArea:e,cropSource:t,isProductPage:a,pinId:n,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:d}){let u=(0,i.Z)({cropArea:e,cropSource:t,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:d}),c="";return a&&(c="products/"),`/pin/${n}/visual-search/${c}${u}`}},154792:(e,t,a)=>{a.d(t,{X:()=>n,Z:()=>l});var i=a(667294);let n=120;function l(e,t=0,a=n){let[r,s]=(0,i.useState)(e?"active":"inactive");return(0,i.useEffect)(()=>{if(e){if(t){let e=setTimeout(()=>s("active"),t);return()=>{clearTimeout(e)}}s("active")}else{let e=setTimeout(()=>s("inactive"),a);return()=>{clearTimeout(e)}}},[e]),r}},259239:(e,t,a)=>{a.d(t,{Z:()=>l});var i=a(883119),n=a(785893);function l({children:e,additionalStyles:t={}}){return(0,n.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...t}},"data-test-id":"contentLayer",left:!0,position:"absolute",right:!0,top:!0,children:e})}},97538:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(883119),n=a(154792),l=a(785893);function r({children:e,fadeInDuration:t=0,fadeOutDuration:a=n.X,visibility:r}){return"none"!==r&&e?(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{hidden:{opacity:0,transition:a?`opacity ${a}ms ease`:void 0},visible:{opacity:1,transition:t?`opacity ${t}ms ease`:void 0}}[r]},children:e}):null}},706106:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var i,n,l=a(667294);a(167912);var r=a(883119),s=a(54977),o=a(340523),d=a(616550),u=a(777609),c=a(513911),p=a(520846),g=a(258194);let m={trace:{strokeStyle:"#fff",lineWidth:2},outline:{strokeStyle:"#fff",lineWidth:3}};function h({contour:e,context:t,scaledX:a,scaledY:i}){t.beginPath(),e.points.forEach((e,n)=>{if(e){let l=e.x*a,r=e.y*i;0===n?t.moveTo(l,r):t.lineTo(l,r)}})}var y=a(34202),_=a(785893);let f=void 0!==i?i:i=a(754980);function x({hoveredCutout:e,id:t,isHidden:i,maskImage:n,maskBounds:x,pinKey:v,pinImageHeight:k,pinImageHovered:S,pinImageWidth:b,onHoverChange:w,requestParams:P,surfaceType:F,trafficSource:j}){let T=(0,s.Z)(f,v),C=(0,d.k6)(),E=(0,d.TH)(),{isHoveringOnCropperEdges:I}=(0,y.Z)(),{checkExperiment:D}=(0,o.F)(),R="enabled_trace"===D("web_cutouts").group,K=(0,l.useRef)(null),L=(0,l.useRef)(null),A=(0,l.useRef)([]),Z=(0,l.useRef)(null),[O,M]=(0,l.useState)(void 0),[N,U]=(0,l.useState)(void 0),[z,B]=(0,l.useState)(0),[H,V]=(0,l.useState)(!1),[G,W]=(0,l.useState)(0),[$,Y]=(0,l.useState)(!1),{xRatio:Q,yRatio:q,wRatio:X,hRatio:J}=(0,l.useMemo)(()=>{let[e,t]=x[0],[a,i]=x[1];return{xRatio:e,yRatio:t,wRatio:a,hRatio:i}},[x]),ee=(0,l.useMemo)(()=>({x:Q*b,y:q*k}),[Q,q,b,k]),et=E.pathname.includes("visual-search"),ea=(0,l.useCallback)(e=>{if(!K.current||!O||!N)return;let a=K.current.getBoundingClientRect(),i=(e.clientX-a.left)/O,n=(e.clientY-a.top)/N;w(A.current.some(e=>(function(e,t){let{x:a,y:i}=e,n=!1,l=0,r=t.length-1;for(;l<t.length;){let{x:e,y:s}=t[l],{x:o,y:d}=t[r];s>i!=d>i&&a<(o-e)*(i-s)/(d-s)+e&&(n=!n),r=l,l+=1}return n})({x:i,y:n},e.points))?t:null)},[O,N,w,t]);(0,l.useEffect)(()=>{let e=K.current;return e?.addEventListener("mousemove",ea),()=>e?.removeEventListener("mousemove",ea)},[ea]),(0,l.useEffect)(()=>{(async()=>{if(!K.current)return;let e=await a.e(18893).then(a.bind(a,618893)),{ContourTracer:t}=e;await e.initLibrary();let i=new t,l=await createImageBitmap(new Blob([Uint8Array.from(atob(n),e=>e.charCodeAt(0))],{type:"image/png"}));A.current=i.trace(l,!1);let r=b*X,s=k*J;M(r/l.width),U(s/l.height),K.current.width=r,K.current.height=s,L.current=new(window.OffscreenCanvas||window.HTMLCanvasElement)(r,s)})()},[n,b,k,X,J]);let ei=(0,l.useCallback)(()=>{Y(!0)},[]);(0,l.useEffect)(()=>{let e=K.current;return e?.addEventListener("transitionend",ei),()=>{e?.removeEventListener("transitionend",ei)}}),(0,l.useEffect)(()=>{if(!K.current||!L.current||!O||!N)return;let a=()=>{if(!K.current||!L.current)return;let a=K.current.getContext("2d"),n=L.current.getContext("2d");a&&n&&K.current&&L.current&&O&&N&&(function({contours:e,context:t,hoveredCutout:a,id:i,isHidden:n,isImageSearchLandingPage:l,scaledX:r,scaledY:s,setTraceProgress:o,style:d,traceProgress:u}){if(t.clearRect(0,0,t.canvas.width,t.canvas.height),!e||0===e.length)return;let c=!n||n&&a===i;if("trace"!==d||void 0===u||l)e.forEach(e=>{h({contour:e,context:t,scaledX:r,scaledY:s}),c&&(t.strokeStyle=m[d].strokeStyle,t.lineWidth=m[d].lineWidth,t.stroke())});else{let a=(u+.008)%1;o(a??0);let i=e[0].points.length,n=Math.floor(.25*i),l=Math.floor(i*a),p=(l-n+i)%i;e.map(e=>{let t=[];return t=p<l?e.points.slice(p,l):e.points.slice(p).concat(e.points.slice(0,l)),{...e,points:t}}).forEach(e=>{let a=e.points.length;if(a>1){let i=e.points[0].x*r,n=e.points[0].y*s,l=e.points[a-1].x*r,o=e.points[a-1].y*s;t.strokeStyle=function({context:e,startX:t,startY:a,endX:i,endY:n}){let l=e.createLinearGradient(t,a,i,n);return l.addColorStop(0,"rgba(255, 255, 255, 0)"),l.addColorStop(.1,"rgba(255, 255, 255, 1)"),l.addColorStop(.9,"rgba(255, 255, 255, 1)"),l.addColorStop(1,"rgba(255, 255, 255, 0)"),l}({context:t,startX:i,startY:n,endX:l,endY:o})}h({contour:e,context:t,scaledX:r,scaledY:s}),c&&(t.lineWidth=m[d].lineWidth,t.stroke())})}}({contours:A.current,context:n,scaledX:O,scaledY:N,id:t,isHidden:i,hoveredCutout:e,isImageSearchLandingPage:et,opacity:z,setTraceProgress:W,style:R?"trace":"outline",traceProgress:R?G:void 0}),a.clearRect(0,0,K.current.width,K.current.height),a.drawImage(L.current,0,0))};return R?(!$||S||i&&t===e)&&(Z.current=requestAnimationFrame(a)):a(),()=>{Z.current&&(cancelAnimationFrame(Z.current),Z.current=null)}},[$,z,O,N,e,t,i,et,R,S,G]),(0,l.useEffect)(()=>{if(S)V(!0),B(1);else if(H)B(0);else{B(1);let e=setTimeout(()=>{V(!1),B(0)},3e3);return()=>clearTimeout(e)}},[S,H,B]);let{getNormalizedPinImage:en}=(0,u.Z)({pinKey:T,maxWidth:c.RZ}),el=(0,l.useCallback)(()=>{if(I)return;let{height:e,width:t}=en(),a=(0,p.Z)({cropArea:{x:Q,y:q,w:X,h:J},scaledWidth:t,scaledHeight:e}),i=(0,g.Z)({cropArea:a,cropSource:9,requestParams:P,surfaceType:F,trafficSource:j});if(i!==window.location.search){let e=`${window.location.pathname}${et?"":"visual-search/"}${i}`;et?C.push(e):C.replace(e)}},[Q,q,X,J,j,C,P,F,en,I,et]);return(0,_.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{top:ee.y,left:ee.x}},height:k*J,position:"absolute",width:b*X,children:(0,_.jsx)("canvas",{ref:K,onMouseLeave:()=>w(null),onMouseUp:el,style:{pointerEvents:I?"none":"auto",cursor:e?"pointer":"auto",opacity:et||S?1:z,transition:S||H||et?"none":"opacity 2s linear 1s"}})})}let v=void 0!==n?n:n=a(734501);function k({cutoutsData:e,height:t,pinKey:a,pinImageHovered:i,surfaceType:n,trafficSource:d,width:u}){let c=(0,s.Z)(v,a),{checkExperiment:p}=(0,o.F)(),[g,m]=(0,l.useState)(null);return p("web_cutouts").anyEnabled?(0,_.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},height:t,position:"relative",width:u,children:e?.bitmap_masks?.map(e=>{let{id:a,mask_image:l,mask_bounds:r,is_hidden:s}=e;return r&&2===r.length&&l&&a?_.jsx(x,{hoveredCutout:g,id:a,isHidden:!!s,maskBounds:r,maskImage:l,onHoverChange:m,pinImageHeight:t,pinImageHovered:i,pinImageWidth:u,pinKey:c,surfaceType:n,trafficSource:d},a):null})}):null}},83255:(e,t,a)=>{a.d(t,{E:()=>i,Z:()=>l});let{Provider:i,useHook:n}=(0,a(342513).Z)("VerticalNav",{width:0}),l=n},589564:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(83255);function n(){let{width:e}=(0,i.Z)();return e}},180338:(e,t,a)=>{a.d(t,{H:()=>i,W:()=>n});let{Provider:i,useMaybeHook:n}=(0,a(342513).Z)("PinCreateDeleteContext")},563322:(e,t,a)=>{a.d(t,{ET:()=>s,UQ:()=>o,dv:()=>d,xZ:()=>c,yh:()=>p});var i,n=a(667294),l=a(342513),r=a(785893);let s={NONE:"NONE",GROUP:"GROUP",SECRET:"SECRET",ARCHIVED:"ARCHIVED"},o={NONE:0,ARCHIVED:1,GROUP:2,SECRET:3},d=((i={}).COLORS="COLORS",i.CREATED_BY_ME="CREATED_BY_ME",i.FAVORITED="FAVORITED",i.FAVORITED_AND_CREATED="FAVORITED_AND_CREATED_BY_ME",i.INTERESTS="INTERESTS",i.NONE="",i),{Provider:u,useMaybeHook:c}=(0,l.Z)("ProfileViewContext");function p({children:e}){let[t,a]=(0,n.useState)(),[i,l]=(0,n.useState)(new Map),[s,o]=(0,n.useState)(),[c,p]=(0,n.useState)(),[g,m]=(0,n.useState)(d.NONE),[h,y]=(0,n.useState)(0),[_,f]=(0,n.useState)(),x=(0,n.useCallback)((e,t)=>{l(new Map(i.set(e,t)))},[i]),v=(0,n.useMemo)(()=>({boardPinDensity:t,boardSortOrder:i,profileBoardView:s,profilePinDensity:c,profileFollowingSelectedIndex:h,selfProfilePinFilter:g,setBoardPinDensity:a,setSelfProfilePinFilter:m,updateBoardSortOrder:x,selfProfileBoardFilter:_,setSelfProfileBoardFilter:f,setProfileBoardView:o,setProfilePinDensity:p,setProfileFollowingSelectedIndex:y}),[t,i,s,c,h,g,_,x]);return(0,r.jsx)(u,{value:v,children:e})}},774812:(e,t,a)=>{a.d(t,{G:()=>h,Z:()=>y});var i=a(667294),n=a(883119),l=a(775089),r=a(213377),s=a(493538),o=a(823987),d=a(554786),u=a(494125),c=a(771881),p=a(685321),g=a(187156),m=a(785893);let h=25;function y({customLayoutType:e,emptyState:t,feedItems:a,feedKey:h,maxColumns:y,pagination:{hasNext:_,isLoadingNext:f,loadNext:x,refetch:v},pullToRefresh:k,renderFeedItem:S,serverRender:b}){let w=(0,d.HG)(),[P,F]=(0,i.useState)(!1),j="userSearch"===e?window.innerWidth-16:200,T=f&&0===a.length&&!P,C="desktopFlashlight"===e?0:r.qG;return(0,u.Z)(()=>(window.addEventListener("online",x),()=>window.removeEventListener("online",x))),(0,m.jsxs)(n.xu,{"data-test-id":"MobileFeed",children:[(0,m.jsx)(p.Z,{enabled:!!k,onPull:()=>{v(),F(!0)},refreshing:P}),(0,m.jsxs)(n.xu,{"data-test-id":"grid",marginEnd:C,marginStart:C,opacity:P?.5:1,children:[(0,m.jsx)(s.Z,{isAtEndOfFeed:!_,itemCount:a.length,children:a.length?(0,m.jsx)(n.xu,{"data-test-id":"feed",marginTop:(0,c.kk)({isDesktop:w}),children:(0,m.jsx)(o.Z.Consumer,{children:t=>(0,m.jsx)(i.Fragment,{children:(0,m.jsx)(c.c$,{children:(0,m.jsx)(l.default,{cacheKey:h,columnWidth:w?r.yF:j,gutterWidth:w?4*r.jC:void 0,id:b?h:void 0,items:a,loadItems:x,maxColumns:y,minCols:"userSearch"===e?1:2,optOutFluidGridExperiment:null!=y,renderItem:({data:e,itemIdx:t})=>S(e,t),scrollContainerRef:t,serverRender:b})})})})}):f?(0,m.jsx)(c.gG,{}):t??null}),T&&(0,m.jsx)(n.xu,{column:12,paddingY:2,children:(0,m.jsx)(g.Z,{partialViewportWidth:"desktopFlashlight"===e})})]})]})}},801690:(e,t,a)=>{a.d(t,{Z:()=>d});var i=a(667294),n=a(525364),l=a(105737),r=a(766311),s=a(785893);class o extends i.Component{componentDidMount(){let{setCurrentPageData:e,viewData:t,viewParameter:a,viewType:i}=this.props;e({viewData:t,viewParameter:a,viewType:i})}componentDidUpdate(e){let{setCurrentPageData:t,viewData:a,viewParameter:i,viewType:n}=this.props;i===e.viewParameter&&n===e.viewType&&(0,l.ZP)(a,e.viewData)||t({viewData:a,viewParameter:i,viewType:n})}componentWillUnmount(){this.props.clearCurrentPageData()}render(){let{auxData:e,children:t,component:a,objectIdStr:i,viewData:n,viewParameter:l,viewType:o,clientTrackingParams:d}=this.props;return(0,s.jsx)(r.Z,{auxData:e,clientTrackingParams:d,component:a,objectIdStr:i,viewData:n,viewParameter:l,viewType:o,children:t})}}function d(e){let{setViewContextData:t,clearViewContextData:a}=(0,n.sV)();return(0,s.jsx)(o,{...e,clearCurrentPageData:a,setCurrentPageData:t})}},766311:(e,t,a)=>{a.d(t,{Z:()=>o});var i=a(667294),n=a(587703),l=a(217058);let r=e=>Object.keys(e).reduce((t,a)=>(void 0===e[a]&&delete t[a],t),{...e}),s=({viewType:e,viewParameter:t,viewData:a,auxData:i,objectIdStr:n,component:s,clientTrackingParams:o,element:d},u)=>{let c=r({event_type:13,view_type:e,view_parameter:t,view_data:a,aux_data:i,object_id_str:n,component:s,clientTrackingParams:o,element:d});-1===Object.keys(c).indexOf("view_type")&&(0,l.My)("mweb.logging.null_view_type"),u(c)};function o(e){let{auxData:t,clientTrackingParams:a,children:l,component:r,element:o,objectIdStr:d,viewData:u,viewParameter:c,viewType:p}=e,g=(0,n.Z)(),m=JSON.stringify(t),h=JSON.stringify(u);return(0,i.useEffect)(()=>{s(e,g)},[g,m,a,r,o,d,h,c,p]),i.Children.only(l)}},153896:(e,t,a)=>{a.d(t,{Z:()=>c});var i=a(667294),n=a(883119),l=a(160408),r=a(214877),s=a(5859),o=a(554786),d=a(923368),u=a(785893);function c({auxData:e,children:t,collapseButtonElementType:a,collapseByDefault:c=!0,componentType:p,displayViewState:g,expandButtonElementType:m,forceTappableHeader:h,headerHeight:y,headerPaddingRight:_,headerPreview:f,heading:x,viewParameter:v,viewType:k}){let S=(0,o.HG)(),{isBot:b}=(0,s.B)(),{logContextEvent:w}=(0,r.v)(),{closeupWithinMasonryEnabled:P,setIsShoppingModuleExpanded:F}=(0,d.x4)(),j=(0,i.useRef)(null),[T,C]=(0,i.useState)(!b&&c||[1,2].includes(g));return(0,i.useEffect)(()=>{F&&F(!T)},[]),(0,u.jsxs)(n.kC,{dataTestId:"collapsible-layout",direction:"column",gap:S&&P?0:4,children:[(0,u.jsx)(l.Z,{collapsed:T,displayViewState:g,forceTappableHeader:h,headerHeight:y,headerPaddingRight:_,headerPreview:f,heading:x,onClick:()=>{C(!T),F&&F(T),w({aux_data:e,component:p,element:T?m:a,event_type:S?101:102,view_parameter:v,view_type:k})},showArrow:!0}),S&&P?(0,u.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transition:P?"height 600ms cubic-bezier(.25,1,.5,1)":void 0}},"data-test-id":`collapsible-layout-content-${T?"collapsed":"expanded"}`,height:T?"0px":`${j?.current?.scrollHeight}px`,marginBottom:P?1:void 0,overflow:"hidden",children:(0,u.jsx)(n.xu,{ref:j,children:t})}):!T&&(0,u.jsx)(n.xu,{children:t})]})}},923368:(e,t,a)=>{a.d(t,{Nb:()=>s,Of:()=>o,YO:()=>r,ZP:()=>c,x4:()=>u});var i=a(667294),n=a(891162),l=a(392029);let r=({showProductDetailPage:e,isLargerPane:t,showCloseupContentRight:a})=>e&&t?a?l.Uj:l.zT:1,s=(0,n.qe)(({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:a,showProductDetailPage:i,viewportSize:n,maxWidth:l,descriptionPaneWidth:r,inCommentFooterRedesignExp:s,isCloseupRelatedPinsAboveTheFoldEnabled:o,isCommentThreadExpanded:d,isMediaViewerOpen:u,isPinNoteExpanded:c,isProductDetailsExpanded:p,isShoppingModuleExpanded:g,setIsCommentThreadExpanded:m,setIsMediaViewerOpen:h,setIsPinNoteExpanded:y,setIsProductDetailsExpanded:_,setIsShoppingModuleExpanded:f,closeupWithinMasonryEnabled:x,peekCloseupEnabled:v,isInRemoveMagnifyingGlassVariant:k,setAbortNoActionPlacementTimeout:S,clientTrackingParams:b,isCloseupMediaViewerOpen:w,setIsCloseupMediaViewerOpen:P})=>({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:a,showProductDetailPage:i,viewportSize:n,maxWidth:l,descriptionPaneWidth:r,inCommentFooterRedesignExp:s,isCloseupRelatedPinsAboveTheFoldEnabled:o,isCommentThreadExpanded:d,isCloseupMediaViewerOpen:w,isMediaViewerOpen:u,isPinNoteExpanded:c,isProductDetailsExpanded:p,isShoppingModuleExpanded:g,setIsCommentThreadExpanded:m,setIsCloseupMediaViewerOpen:P,setIsMediaViewerOpen:h,setIsPinNoteExpanded:y,setIsProductDetailsExpanded:_,setIsShoppingModuleExpanded:f,closeupWithinMasonryEnabled:x,peekCloseupEnabled:v,isInRemoveMagnifyingGlassVariant:k,setAbortNoActionPlacementTimeout:S,clientTrackingParams:b})),o={showCloseupContentRight:!0,showProductDetailPage:!1,viewportSize:"lg",paneWidth:l.Gg,pdpCarouselSlotToPaneRatio:1,maxWidth:l.u6,descriptionPaneWidth:l.u6-l.Gg,inCommentFooterRedesignExp:!1,isCloseupRelatedPinsAboveTheFoldEnabled:!1,isCommentThreadExpanded:!1,isCloseupMediaViewerOpen:!1,isMediaViewerOpen:!1,isPinNoteExpanded:!1,isShoppingModuleExpanded:!1,closeupWithinMasonryEnabled:!1,peekCloseupEnabled:!1,isInRemoveMagnifyingGlassVariant:!1,setAbortNoActionPlacementTimeout:()=>{},setIsCloseupMediaViewerOpen:()=>{},setIsMediaViewerOpen:()=>{},setIsShoppingModuleExpanded:()=>{}},d=(0,i.createContext)(o);function u(){let e=(0,i.useContext)(d);if(!e)throw Error("useCloseupContext must be used within CloseupContextProvider");return e}let c=d},392029:(e,t,a)=>{a.d(t,{$T:()=>f,CI:()=>r,Ch:()=>o,ER:()=>_,Gb:()=>d,Gg:()=>n,Hf:()=>k,Ie:()=>g,KP:()=>m,Kn:()=>s,O5:()=>x,Uj:()=>u,bx:()=>h,d2:()=>p,g9:()=>y,iB:()=>S,rv:()=>v,u6:()=>l,zT:()=>c});var i=a(883119);let n=508,l=1016,r=488,s=992,o=672,d=1176,u=.6,c=.84,p=40,g=72,m=740,h=912,y=32,_=16,f=24,x=2,v=1,k=new i.Ry(5),S={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},822592:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(883119),n=a(67664),l=a(785893);function r({coverImages:e,height:t,isHovered:a,onClick:r,onMouseEnter:s,onMouseLeave:o,textType:d,text:u,url:c,width:p}){let g=e&&(e["236x"]||e["280x280"]);return(0,l.jsx)(n.Z,{backgroundColor:"gray",coverImage:g,height:t,isHovered:a,onClick:r,onMouseEnter:s,onMouseLeave:o,url:c,width:p,children:(0,l.jsx)(i.xu,{alignItems:"center",display:"flex",height:t,justifyContent:"center",padding:3,position:"absolute",top:!0,width:p||"100%",children:"text"===d?(0,l.jsx)(i.xu,{alignItems:"center",display:"flex",height:48,padding:3,children:(0,l.jsx)(i.X6,{align:"center",color:"light",size:"500",children:u})}):(0,l.jsx)(i.xu,{alignItems:"center",color:"secondary",display:"flex",height:48,padding:3,rounding:"pill",children:(0,l.jsx)(i.xv,{align:"center",weight:"bold",children:u})})})})}},67664:(e,t,a)=>{a.d(t,{A:()=>r,Z:()=>s});var i=a(667294),n=a(883119),l=a(785893);let r={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"},lightHoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"}};function s({backgroundColor:e,children:t,coverImage:a,disableTabIndex:s,height:o,id:d,isHovered:u,onClick:c,onMouseDown:p,onMouseEnter:g,onMouseLeave:m,searchBoxRenderStopwatch:h,url:y,width:_}){let[f,x]=(0,i.useState)(!1),v=()=>{g?g():x(!0)},k=()=>{m?m():x(!1)},S=u||f,b=S?r.hoverOverlay:r.bubbleOverlay;return(0,l.jsx)(n.Tg,{href:y,onBlur:k,onFocus:v,onMouseDown:p,onMouseEnter:v,onMouseLeave:k,onTap:()=>{c?.(d)},rounding:4,tabIndex:s?-1:void 0,children:(0,l.jsx)(n.zd,{height:o,rounding:4,width:_||"100%",children:a?.url?(0,l.jsxs)(n.Ee,{alt:"",color:e,fit:"cover",naturalHeight:a.height??1,naturalWidth:a.width??1,onLoad:()=>{h?.stop()},role:"presentation",src:a.url,children:[(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:b},height:"100%",width:"100%"}),"function"==typeof t?t({isHovered:S}):t]}):(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:"100%",width:"100%"})})})}},270766:(e,t,a)=>{a.d(t,{Z:()=>ej});var i,n,l,r,s,o,d=a(667294);a(167912);var u=a(616550),c=a(883119),p=a(54977),g=a(405459),m=a(140017),h=a(340523),y=a(757640),_=a(689390),f=a(867013),x=a(735382),v=a(82205),k=a(205841),S=a(339001),b=a(217058),w=a(785893);let P=void 0!==i?i:i=a(894595),F=()=>{(0,b.NC)("click_best_pin_board",!0)},j=()=>{(0,b.NC)("click_best_pin_profile",!0)},T=({pin:e})=>{let{pinner:t}=e,{username:a,fullName:i}=t??{},n=t?.imageMediumUrl||t?.imageSmallUrl,l=`/${a??""}/`;return(0,w.jsx)(c.Tg,{fullWidth:!1,href:l,onTap:j,rounding:"circle",children:(0,w.jsx)(k.qE,{name:i??"",outline:!0,size:"sm",src:n??""})})},C=({pin:e})=>{let t=(0,m.ZP)(),{board:a,pinner:i}=e,{name:n,privacy:l,url:r}=a??{},s=a?.entityId||"",{username:o,fullName:d}=i??{},u=`/${o??""}/`,p=(0,w.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:(0,w.jsx)(c.rU,{display:"inlineBlock",href:u,onClick:j,underline:"hover",children:d})},d);return"protected"===l?(0,S.nk)(t._('{{ pinnerName }} saved this Pin', 'Showing who saved this pin, but not which board (private board), on closeup', 'Showing who saved this pin, but not which board (private board), on closeup'),{pinnerName:p}):(0,S.nk)(t._('{{ pinnerName }} saved to {{ boardName }}', 'Showing who saved this pin to which board on closeup', 'Showing who saved this pin to which board on closeup'),{pinnerName:p,boardName:(0,w.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:(0,w.jsx)(c.rU,{href:r??"",onClick:F,children:n},"board")},s)})},E=({pinKey:e})=>{let t=(0,p.Z)(P,e);return(0,w.jsxs)(c.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,w.jsx)(T,{pin:t}),(0,w.jsx)(c.xu,{marginEnd:2}),(0,w.jsx)(c.xv,{size:"200",children:(0,w.jsx)(C,{pin:t})})]})},I=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="underline")},D=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="none")};var R=a(587703);function K({pageType:e,pinCreditPrefix:t,pin:a,pinLink:i,viewParameter:n}){let l=(0,m.ZP)(),r=(0,R.Z)();if("topic"!==e.page&&(!a.domain||"Uploaded by user"===a.domain))return null;let s="topic"!==e.page||e.isAuth?"100":"200",o="topic"===e.page&&!!a.nativeCreator,d=o?a.nativeCreator?.fullName:a.domain;return(0,w.jsx)(c.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,w.jsx)(c.rU,{display:"inlineBlock",href:o?`/${a.nativeCreator?.username||""}/`:i,onClick:()=>{"topic"===e.page?(0,b.NC)("click_topic_best_pin_link"):r({event_type:12,view_type:3,object_id_str:a.entityId,component:85,view_parameter:n})},rel:"nofollow",target:"blank",underline:"hover",children:(0,w.jsx)(c.xv,{size:s,children:(0,S.nk)(l._('{{ pinCreditPrefix }} {{ pinCredit }}', 'Tells the user where the pin is from in the form of "Saved from <website>"', 'Tells the user where the pin is from in the form of "Saved from <website>"'),{pinCreditPrefix:t,pinCredit:(0,w.jsx)(c.xv,{inline:!0,size:s,weight:"bold",children:"topic"!==e.page?(0,w.jsxs)("span",{onBlur:D,onFocus:I,onMouseLeave:D,onMouseOver:I,children:[" ",a.domain]}):d},o?"creatorProfile":"pinLinkDomain")})})})})}var L=a(92785),A=a(388769),Z=a(391884),O=a(189469),M=a(567344),N=a(781705),U=a(661428),z=a(414131),B=a(496782),H=a(686769);let V=void 0!==n?n:n=a(200932);function G({recipeKey:e}){let t=(0,p.Z)(V,e);if(t?.aggregateRating?.ratingValue&&t.aggregateRating.reviewCount){let e="number"==typeof t.cookTimes?.cook?.m&&"number"==typeof t.cookTimes.prep?.m?`${t.cookTimes.cook.m+t.cookTimes.prep.m} minutes \xb7 `:"";return(0,w.jsxs)(d.Fragment,{children:[(0,w.jsx)(H.Z,{max_rating:t.aggregateRating.bestRating,rating:t.aggregateRating.ratingValue},t.aggregateRating.ratingValue),(0,w.jsx)(c.xv,{inline:!0,size:"200",children:` ${t.aggregateRating.reviewCount} \xb7 ${e}`})]})}return null}var W=a(5859);let $=void 0!==l?l:l=a(340359),Y=e=>{let t=null;e.lastRepinDate&&(t=new Date(e.lastRepinDate));let a=null;return(e.createdAt&&(a=new Date(e.createdAt)),t)?a?t>a?t:a:t:a},Q=e=>{let t="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return t;let a=Y(e);if(a&&a.getFullYear()===new Date().getFullYear()){let i=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:n}=e;i.has(n)&&(t=a?(0,w.jsx)(L.Z,{dateFormatType:L.k.LONG_MONTH_YEAR,useUTC:!1,value:a}):"")}return t},q=e=>!!(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished),X=(e,t)=>{let a=new Date((e.richMetadata??{}).article?.datePublished??Date.now()),i=a.getTime(),n=new Date().getTime();return null==t||n-i<=31536e6*t?(0,w.jsx)(L.Z,{dateFormatType:L.k.LONG_MONTH_YEAR,useUTC:!1,value:a}):""};function J(e){let{pinKey:t,viewportSize:a,pageType:i}=e,n=(0,p.Z)($,t),{pinCreditPrefix:l,pinLink:r}=(0,N.Z)(n),s=(0,U.Z)(n),{description:o}=(0,M.eK)({richMetadataDescription:n.richMetadata?.description,richSummaryDisplayName:n.richSummary?.displayName,closeupUnifiedDescription:n.closeupUnifiedDescription});"videos_category"===i.page&&(o=(0,M.kt)(o,n.nativeCreator?.username||""));let d="wide"===a,u=(0,M.Ly)({pinTitle:n.title,gridTitle:n.gridTitle,richSummaryDisplayName:n.richSummary?.displayName??"",richMetadataTitle:n.richMetadata?.title??"",storyPinDataId:n.storyPinDataId,storyPinDataMetadataPinTitle:n.storyPinData?.metadata?.pinTitle,pinJoinVisualAnnotation:n.pinJoin?.visualAnnotation});(n.gridTitle||"").trim()&&u!==n.gridTitle&&(u=(0,M.EU)(n.gridTitle,200));let g=(0,O.r)(n.richMetadata?.recipe?.name,!!n.richMetadata?.recipe?.categorizedIngredients,n.richMetadata?.recipe?.fromAggregatedData??!1)?n.richMetadata?.recipe:null,m=q(n)&&X(n,2),h=Q(n)||m,{isBot:y,isSocialBot:_}=(0,W.B)();return(0,w.jsx)(c.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,w.jsxs)(c.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,w.jsx)(K,{pageType:i,pin:{entityId:n.entityId,domain:n.domain||"",nativeCreator:n.nativeCreator&&{fullName:n.nativeCreator.fullName,username:n.nativeCreator.username}},pinCreditPrefix:"topic"===i.page&&n.nativeCreator?"Created by":l,pinLink:r??"",viewParameter:(0,z.Z)({hasPin:!0,hasPinRichMetadata:!!n.richMetadata,hasPinRichMetadataProducts:!!n.richMetadata?.products,hasPinRichMetadataArticle:!!n.richMetadata?.article,hasPinRichMetadataRecipe:!!n.richMetadata?.recipe,hasPinStoryPinData:!!n.storyPinData})}),(0,w.jsx)(c.kC,{direction:"row",justifyContent:"between",children:(0,w.jsx)(c.xu,{display:"flex",marginEnd:d?0:3,marginTop:d?3:0,overflow:"hidden",children:u&&(0,w.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:600,fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:u})})}),h?(0,w.jsx)(c.xu,{marginTop:1,children:(0,w.jsx)(c.xv,{color:"subtle",children:h})}):null,o&&(0,w.jsx)(c.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,w.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[g&&(0,w.jsx)(G,{recipeKey:g}),o]})}),g&&(0,w.jsx)(B.Z,{marginOverrides:g?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:g.categorizedIngredients,name:g.name,image:(0,Z.Z)({imagesUrls:s,embedSrc:n.embed?.src,embedType:n.embed?.type,excludeOriginals:!y&&!_})}}}),(0,w.jsxs)(c.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:[(0,w.jsx)(E,{pinKey:n}),(0,w.jsx)(c.kC,{alignItems:"stretch",justifyContent:"end",children:!n.repinCount||n.repinCount<1?null:(0,w.jsxs)(c.kC,{alignItems:"center",justifyContent:"start",children:[(0,w.jsx)(c.JO,{accessibilityLabel:"Pin",color:"subtle",icon:"pin",size:12}),(0,w.jsx)(c.xv,{color:"default",inline:!0,size:"100",children:(0,w.jsx)(A.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:n.repinCount})})]})})]})]})})}var ee=a(922725),et=a(582158),ea=a(741983),ei=a(777609),en=a(627408),el=a(623409),er=a(160567),es=a(624797),eo=a(494125),ed=a(129675),eu=a(520846),ec=a(258194),ep=a(755453),eg=a(676554),em=a(125768),eh=a(774812);let ey=0,e_="",ef=void 0!==r?r:r=a(572621);function ex(e){let{imageSpec_564x:t,imageSpec_orig:a,imageSignature:i}=e,n=t&&a,{url:l}=n??{},r=n?.width??1,s=n?.height??void 0;return"number"==typeof r&&"number"==typeof s&&r>564&&(s*=564/r,r=564),{width:r,height:s,url:l,imageSignature:i}}let ev=({data:e,index:t,viewParameter:a,productsURL:i})=>{switch(e.type){case"pin":return(0,w.jsx)(eg.ZP,{duploQueryRef:null,pinId:e.id,slotIndex:t,viewParameter:a,viewType:72});case"story":return i&&(0,w.jsx)(v.Z,{dangerouslySetActionUrl:i,slotIndex:t,story:e});default:return null}},ek=({resourceOptions:e})=>{let t=(0,m.ZP)(),{data:a,isAtEnd:i,isFetching:n,fetchMore:l}=(0,y.Z)({name:"VisualLiveSearchResource",options:e}),r=(0,u.TH)(),s=`${r.pathname}products/${r.search}`;return(0,w.jsxs)(d.Fragment,{children:[a&&(0,w.jsx)(eh.Z,{customLayoutType:"desktopFlashlight",feedItems:a.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:l,hasNext:i,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>ev({data:e,index:t,viewParameter:3050,productsURL:s})}),(0,w.jsx)(c.$j,{accessibilityLabel:t._('Loading visual search results...', 'unauthDesktopVisualSearch.flashlightFeed.loading', 'Accessibility label for loading visual search results'),show:n})]})},eS=({resourceOptions:e})=>{let t=(0,m.ZP)(),{data:a,isAtEnd:i,isFetching:n,fetchMore:l}=(0,y.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,w.jsxs)(d.Fragment,{children:[a&&(0,w.jsx)(eh.Z,{customLayoutType:"desktopFlashlight",feedItems:a||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:l,hasNext:i,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>ev({data:e,index:t,viewParameter:3334})}),(0,w.jsx)(c.$j,{accessibilityLabel:t._('Loading visual search product results...', 'unauthDesktopVisualSearch.flashlightProductFeed.loading', 'Accessibility label for loading visual search product results'),show:n})]})};function eb({pinKey:e}){let t=(0,m.ZP)(),{isRTL:a}=(0,W.B)(),i=(0,R.Z)(),n=(0,u.k6)(),l=(0,u.TH)(),r=(0,d.useRef)(),s=(0,u.$B)(),o=(0,el.Z)(),{pinId:g}=(0,_.Z)(s.params.id||""),h=(0,es.mB)(l.search),y=(0,x.Z)(l),v=function(e){let t=parseInt(e??"",10);switch(t){case 1:case 2:case 3:case 4:case 5:case 6:return t;default:return}}(h.cropSource),k=(0,ea.hd)(l),S=(0,p.Z)(ef,e),{getNormalizedPinImage:b}=(0,ei.Z)({pinKey:S});if((0,d.useEffect)(()=>{if(!y&&S){let{width:e,height:t}=b(),a=(0,ep.Z)({cropArea:{h:t-2*ee.S,w:e-2*ee.S,x:ee.S,y:ee.S},isProductPage:k,pinId:g,surfaceType:"flashlight"});n.replace(a)}},[b,n,y,k,S,g]),(0,eo.Z)(()=>{i({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:g}})}),(0,d.useEffect)(()=>{let e=r.current;return e&&e_===g&&(e.scrollTop=ey),()=>{e&&(ey=e.scrollTop,e_=g)}}),!S)return(0,w.jsx)(en.Z,{objectId:"",view:72,children:(0,w.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:er.Pw}},position:"relative",children:(0,w.jsx)(c.$j,{accessibilityLabel:t._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})})});let{imageSignature:P,description:F}=S,{width:j,height:T,url:C}=ex(S),E=function({initialCropArea:e,pin:t}){let a;if(e)a={...e};else{let{visualObjects:e}=t,{width:i=1,height:n=1}=ex(t);if(e&&e.length){let{x:t,y:l,w:r,h:s}=e[0];a=(0,eu.Z)({cropArea:{x:t,y:l,w:r,h:s},scaledWidth:i,scaledHeight:n})}else{let[e,t]=[i/6,n/6],[l,r]=[i-2*e,n-2*t];a={x:e,y:t,w:l,h:r}}}return{x:Math.floor(a.x??0),y:Math.floor(a.y??0),w:Math.floor(a.w??0),h:Math.floor(a.h??0)}}({initialCropArea:y,pin:S}),I=l.state&&l.state.internalNavigation,D=j+f.n,K=(D??1)+24,L={pin_id:g,imageSignature:P,crop:(0,ed.Z)({cropArea:E,scaledWidth:j,scaledHeight:T}),crop_source:v||5},A={__style:{top:140}};return(0,w.jsx)(en.Z,{objectId:"",view:72,children:(0,w.jsxs)(d.Fragment,{children:[(0,w.jsxs)(c.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{top:80}},display:"flex",height:60,position:"fixed",width:"100%",zIndex:new c.Ry(4),children:[(0,w.jsx)(c.xu,{left:!0,position:"absolute",children:(0,w.jsx)(em.Z,{})}),(0,w.jsx)(c.xu,{flex:"grow",children:(0,w.jsx)(c.X6,{align:"center",size:"400",children:k?t._('Shop similar items', 'unauthDesktopFlashlightPage.flashlightProductsFeed.header', 'Header explaining results of flashlight products search'):t._('Visually similar results', 'unauthDesktopFlashlightPage.flashlightFeed.header', 'Header explaining results of flashlight search')})})]}),k?(0,w.jsx)(c.xu,{dangerouslySetInlineStyle:A,position:"relative",children:(0,w.jsx)(eS,{resourceOptions:L})}):(0,w.jsxs)(c.xu,{display:"flex",paddingX:12,children:[(0,w.jsxs)(c.xu,{ref:r,dangerouslySetInlineStyle:A,height:"calc(100% - 140px)",marginEnd:3,marginStart:3,overflow:"auto",position:"fixed",width:D,zIndex:new c.Ry(4),children:[(0,w.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{width:j,height:T}},"data-test-id":"flashlight-enabled-image",children:(0,w.jsxs)(c.zd,{height:T,rounding:2,width:j,children:[(0,w.jsx)(c.Ee,{alt:F??"",naturalHeight:T??1,naturalWidth:j??1,src:C??""}),(0,w.jsx)(et.Z,{customCropper:function({origCrop:e,cropSource:t}){let a=window.location.pathname+window.location.search,i=(0,ep.Z)({cropArea:e,cropSource:t??6,isProductPage:k,pinId:g,surfaceType:"flashlight"});o({action:"trigger",item:"cropper-changed",within:"flashlight-page"}),i!==a&&g&&n.replace({pathname:`/pin/${g}/visual-search/`,search:(0,ec.Z)({cropArea:e,cropSource:t??6,surfaceType:"flashlight"}),state:{internalNavigation:!0}})},imageSignature:P??void 0,imageSize:{h:T,w:j},initialCropArea:E,pinKey:S,showAnimation:!I,surfaceType:"flashlight",viewParameter:3050,viewType:72})]})}),(0,w.jsx)(c.xu,{"data-test-id":"closeupDescription",direction:"column",display:"flex",margin:5,maxWidth:j??1,position:"relative",children:(0,w.jsx)(J,{pageType:{isAuth:!1,page:"flashlight"},pinKey:S,viewportSize:"narrow"})})]}),(0,w.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...A.__style,...a?{marginRight:`${K}px`}:{marginLeft:`${K}px`}}},position:"relative",width:"100%",children:(0,w.jsx)(ek,{resourceOptions:L})})]})]})})}let ew=void 0!==s?s:s=a(790602),eP=void 0!==o?o:o=a(343015);function eF(){let{checkExperiment:e}=(0,h.F)(),t=(0,u.$B)(),{pinId:a}=(0,_.Z)(t.params.id||""),i=e("unauth_dweb_graphql_flashlight_pinResource").anyEnabled,n=(0,g.Z)({strategy:i?"GRAPHQL":"LEGACY",query:eP,variables:{pinId:a},options:{fetchPolicy:"store-or-network"},transformGraphQL:e=>e.v3GetPinQuery?.__typename==="V3GetPin"?e.v3GetPinQuery.data:null,useGetLegacyData:({pinId:e})=>(0,y.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}}).data}),l=(0,p.Z)(ew,n);return(0,w.jsx)(eb,{pinKey:l})}function ej(){let e=(0,m.ZP)();return(0,w.jsx)(d.Suspense,{fallback:(0,w.jsx)(c.$j,{accessibilityLabel:e._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:(0,w.jsx)(eF,{})})}},407053:(e,t,a)=>{a.d(t,{AA:()=>l,E9:()=>y,EU:()=>x,IO:()=>f,KH:()=>u,Lg:()=>p,QR:()=>d,Uw:()=>n,ZR:()=>v,dx:()=>g,dy:()=>o,eV:()=>m,fo:()=>h,k7:()=>r,rT:()=>_,tz:()=>c,u9:()=>k,zR:()=>s,zu:()=>i});let i="OPEN_UNAUTH",n="openUnauthType",l="_isAfterLogin",r="_lastVisitedPages",s="_lastVisitedPagesBeforeLogin",o="_lastVisitedBoardPages",d="_lastVisitedPagesBeforeNavPage",u="_lastVisitedSessionPages",c="_unauthVisitedPages",p="_inviteCodeRedemption",g="_inviteCodeRedemptionList",m="_paidTrafficLand",h="_unauthReferrerString",y="unauthTopicsFollowed",_=["US","CA","NZ","AU"],f=new Set(["GB","IE"]),x=new Set(["AT","BE","CH","DE","DK","ES","FR","IT","NL","NO","PT","SE"]),v=new Set(["BR","MX","AR","CL","CO","PE"]),k="ad_img"},414141:(e,t,a)=>{a.d(t,{Z:()=>e2});var i,n,l,r,s,o,d,u,c,p,g,m,h=a(667294);a(167912);var y=a(616550),_=a(883119),f=a(54977),x=a(405459),v=a(140017),k=a(340523),S=a(7829),b=a(689390),w=a(735382),P=a(922725),F=a(777609),j=a(513911);let T=void 0!==i?i:i=a(632349);var C=a(624797),E=a(250790),I=a(40770),D=a(129675),R=a(34202),K=a(757640),L=a(867013),A=a(214877),Z=a(901855),O=a(785893);function M({arrowType:e,pinId:t,viewParameter:a,viewType:i}){let n=(0,v.ZP)(),l=(0,y.k6)(),{previous:r}=(0,Z.Hv)(),{logContextEvent:s}=(0,A.v)();return(0,O.jsx)(_.xu,{"data-test-id":"go-back-button",children:(0,O.jsx)(_.hU,{accessibilityLabel:n._('Go back', 'Accessible icon for close button', 'Accessible icon for close button'),icon:e??"directional-arrow-left",iconColor:"darkGray",onClick:()=>{if(s({event_type:101,view_type:i,element:34,view_parameter:a}),0===r.length){l.replace(`/pin/${t}/`);return}l.goBack()}})})}var N=a(819429),U=a(30378),z=a(5859),B=a(71980);function H({buttonText:e,handleDrawerClose:t,isDrawerOpen:a,onClick:i,largeSize:n=!1,reversed:l=!1,invertWhenDrawerIsOpen:r=!1,hasProductFiltersApplied:s=!1}){let o=(0,v.ZP)(),d=r&&a,u=(0,O.jsx)(_.JO,{accessibilityLabel:"",color:d?"light":"dark",icon:"filter"},"filterIcon"),c=e&&(0,O.jsx)(_.xv,{align:"center",color:d?"inverse":"default",weight:"bold",children:e},e);return(0,O.jsx)(_.iP,{accessibilityLabel:o._('Filter', 'productsFilterButton', 'Button to filter products results'),onTap:()=>{a?t():i()},rounding:"pill",children:(0,O.jsxs)(_.xu,{position:"relative",children:[(0,O.jsx)(_.xu,{alignContent:"center",color:d?"dark":"secondary",dangerouslySetInlineStyle:n?{__style:{padding:"18px"}}:void 0,display:"flex",justifyContent:"center",minHeight:40,paddingX:4,rounding:"pill",children:(0,O.jsx)(_.kC,{alignItems:"center",gap:{row:2,column:0},children:l?[c,u]:[u,c]})}),s&&(0,O.jsx)(_.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},display:"flex",height:14,justifyContent:"center",minWidth:14,position:"absolute",right:!0,rounding:"pill",top:!0})]})})}function V({filtersText:e,handleDrawerClose:t,handleDrawerOpen:a,isDrawerOpen:i,isProductOnlyFeed:n,pinId:l,showFilter:r,title:s,viewParameter:o,viewType:d}){let{logContextEvent:u}=(0,A.v)(),{isRTL:c}=(0,z.B)(),p=(0,h.useRef)(null);(0,h.useEffect)(()=>(r&&u({event_type:120,view_type:d,component:13467,element:11735,view_parameter:o}),p.current&&U.Z.addObstruction("top",p.current),()=>{p.current&&U.Z.removeObstruction("top",p.current)}),[r]);let g=()=>{u({event_type:101,view_type:d,component:13467,element:11735,view_parameter:o}),a&&a()};return(0,O.jsx)(B.Z,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:(0,O.jsxs)(_.xu,{ref:p,alignItems:"center",color:"default","data-test-id":"related-products-header",display:"flex",justifyContent:"center",minHeight:60,position:"absolute",top:!0,width:"100%",children:[(0,O.jsx)(_.xu,{left:!c,marginStart:5,position:"absolute",right:c,children:(0,O.jsx)(M,{arrowType:n?"directional-arrow-left":"cancel",pinId:l,viewParameter:o,viewType:d})}),(0,O.jsx)(N.Z,{title:s}),r&&"boolean"==typeof i&&g&&e&&t&&(0,O.jsx)(_.xu,{"data-test-id":"filter-button",left:c,marginEnd:12,position:"absolute",right:!c,children:(0,O.jsx)(H,{buttonText:e,handleDrawerClose:t,isDrawerOpen:i,onClick:g})})]})})}var G=a(582158),W=a(906623);let $=void 0!==n?n:n=a(239e3);function Y({cropArea:e,description:t,height:a,imageSignature:i,imageUrl:n,pinId:l,pinKey:r,requestParams:s,showAnimation:o,surfaceType:d,trafficSource:u,viewParameter:c,width:p}){let g=(0,f.Z)($,r),m=(0,W.E)();return(0,O.jsx)(_.xu,{"data-test-id":"flashlight-enabled-image",height:a,width:p,children:(0,O.jsxs)(_.zd,{height:a,rounding:4,width:p,children:[(0,O.jsx)(_.Ee,{alt:t,naturalHeight:a,naturalWidth:p,onLoad:()=>{m&&m.markConstraintComplete("visualSearchMainPinImageRender")},src:n}),(0,O.jsx)(G.Z,{imageSignature:i,imageSize:{h:a,w:p},initialCropArea:e,pinId:l,pinKey:g,requestParams:s,showAnimation:!!o,surfaceType:d,trafficSource:u,viewParameter:c})]})})}var Q=a(706308);function q(){let e=(0,W.E)();return t=>{e&&t&&("remove"===t?e.removeConstraint("shoppingModuleRender"):"complete"===t&&e.markConstraintComplete("shoppingModuleRender"))}}var X=a(213377),J=a(70903),ee=a(822592),et=a(676554);function ea({action:e,component:t,dangerouslySetActionUrl:a,element:i,contextLogData:n,hasPwtConstraint:l,id:r,objects:s,surface:o,viewType:d,viewParameter:u}){let{logContextEvent:c}=(0,A.v)(),p=q(),{url:g,text:m}=e||{},h=g&&m?e=>(0,O.jsx)(ee.Z,{coverImages:e.images,height:X.yF,onClick:()=>c({event_type:101,view_type:d,view_parameter:u,component:t,element:i,aux_data:{story_id:r,...n}}),text:m,url:a??g,width:X.yF},"actionBubble"):null,{containerRef:y,itemsToRender:f,actionItem:x}=(0,J.n)({items:s,itemWidth:X.yF,itemGap:X.oX,actionItemType:h?"one":void 0});return l&&p&&p(f&&f.length>0?"complete":"remove"),(0,O.jsxs)(J.Z,{containerRef:y,itemGap:X.oX,children:[f.map((e,a)=>(0,O.jsx)(_.xu,{"data-grid-item":"true",flex:"none",width:X.yF,children:(0,O.jsx)(et.ZP,{authDesktopSurface:o??"ShoppingDynamicHeightGrid",auxData:n,componentType:t,duploQueryRef:null,pin:e,pinId:e.id,pinImageCrop:{height:X.yF,width:X.yF},slotIndex:a,viewParameter:u,viewType:d})},e.id)),x&&h?.(x)]})}function ei({title:e}){return(0,O.jsx)(_.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:55}},"data-test-id":"unified-feed-subheader",display:"flex",justifyContent:"center",children:(0,O.jsx)(_.X6,{accessibilityLevel:2,size:"400",children:e})})}var en=a(156725),el=a(939809);let er={flashlight:72,stela:427,stl:427};function es({pinId:e,surfaceType:t,visualSearchFlashlightUnifiedResource:a}){let i=(0,y.TH)(),n=q(),{data:l,isLoaded:r}=a,s=l?.results||[],o=t?er[t]:72;n&&(!s&&r||s&&!s.some(e=>"story"===e.type&&"unified_visual_feed_product_upsell"===e.story_type))&&n("remove");let d=s.filter(e=>"story"===e.type);return(0,O.jsx)(h.Fragment,{children:d.map((t,a)=>{if("story"!==t.type)return null;let{action:n,id:l="",objects:r,story_type:s,title:d}=t,u=d?.format||"",c=(0,C.mB)(i.search),p=(0,C.mB)(n?.url).full_feed_title||"";c.full_feed_title=(0,en.Z)(p);let g=(0,C.XP)(c),m=`/pin/${e}/visual-search/products/?${g}`;switch(s){case"stela_shop":case"unified_visual_feed_product_upsell":return(0,O.jsx)(el.qS,{auxData:{story_type:s},component:14339,loggingId:l,objectIdStr:l,slotIndex:a,viewParameter:3462,viewType:o,children:({impressionTrackerRef:e})=>(0,O.jsxs)(_.xu,{ref:e,children:[u&&(0,O.jsx)(ei,{title:u}),(0,O.jsx)(_.xu,{"data-test-id":"unified-feed-stela-story",marginBottom:12,marginTop:4,children:(0,O.jsx)(ea,{action:n,component:14339,contextLogData:{story_type:s},dangerouslySetActionUrl:m,element:179,hasPwtConstraint:!0,id:l,objects:r,surface:"ShoppingModule",viewParameter:3462,viewType:o})})]})},l);case"unified_visual_feed_organic_header":return(0,O.jsx)(el.qS,{auxData:{story_type:s},component:14339,loggingId:l,objectIdStr:l,slotIndex:a,viewParameter:3462,viewType:o,children:({impressionTrackerRef:e})=>(0,O.jsx)(_.xu,{ref:e,marginBottom:4,children:(0,O.jsx)(ei,{title:t?.title?.format||""})})},l);default:return null}})})}var eo=a(430062);let ed=void 0!==l?l:l=a(141027);function eu({isFilterOpened:e,isProductOnlyFeed:t,pinKey:a,surfaceType:i,viewParameter:n,viewType:l,visualSearchFlashlightUnifiedResource:r}){let s=(0,f.Z)(ed,a),o="stl"===i,d=o||t,{data:u}=r,c=u?.search_identifier;return(0,O.jsxs)(h.Fragment,{children:[!o&&(0,O.jsx)(es,{pinId:s.entityId,surfaceType:i,visualSearchFlashlightUnifiedResource:r}),(0,O.jsx)(eo.Z,{commerceData:{is_product_only_feed:d},isFilterOpened:e,isProductFeed:d,searchId:c,viewParameter:n,viewType:l,visualSearchFlashlightUnifiedResource:r})]})}var ec=a(549629),ep=a(603642),eg=a(71328),em=a(627408),eh=a(494125),ey=a(339001),e_=a(755453);a(422578);var ef=a(268127);let ex=void 0!==r?r:r=a(899854);var ev=a(775089),ek=a(493538),eS=a(19447);let eb=({data:e,itemIdx:t})=>{let a=(0,eS.S6)(),i=(e.id?a(e.id):null)||e;return(0,O.jsx)(et.rX,{authDesktopSurface:"RelatedProductsFeed",duploQueryRef:null,pinId:i.id,pinKey:null!=i?{type:"deprecated",data:i}:null,slotIndex:t,viewParameter:3334,viewType:72})};function ew({visualLiveSearchProductFeedResourceData:e}){let t=(0,v.ZP)(),{data:a,isAtEnd:i,isLoaded:n,isFetching:l,fetchMore:r}=e,s=Array.isArray(a)?a:a?.results;return n?s&&0!==s.length?(0,O.jsx)(ek.Z,{isAtEndOfFeed:i,itemCount:s.length,children:(0,O.jsx)(ev.default,{columnWidth:X.yF,items:s,loadItems:()=>{l||i||r()},renderItem:e=>(0,O.jsx)(eb,{...e}),scrollContainer:()=>window,virtualize:!1})}):null:(0,O.jsx)(_.kC,{alignItems:"stretch",alignSelf:"center",justifyContent:"center",children:(0,O.jsx)(_.$j,{accessibilityLabel:t._('Loading related products', 'Label for loading spinner', 'Label for loading spinner'),show:!0})})}var eP=a(892254),eF=a(82205);let ej=void 0!==s?s:s=a(643229);function eT({pinKey:e,viewParameter:t,visualLiveSearchResourceData:a}){let i=(0,v.ZP)(),{hasSimplifiedPinGridExpLoaded:n}=(0,eP.$)(),l=(0,f.Z)(ej,e),{data:r,isFetching:s,fetchMore:o}=a,d=r?.results,u=r?.search_identifier;return(0,O.jsxs)(h.Fragment,{children:[d&&u&&(0,O.jsx)(_.Rk,{columnWidth:X.yF,items:d,loadItems:o,minCols:1,renderItem:({data:e,itemIdx:a})=>(function({data:e,itemIdx:a}){let i=`${window.location.pathname}products/${window.location.search}&full_feed_title=${encodeURIComponent("Shop similar items")}`;return"story"===e.type?(0,O.jsx)(eF.Z,{dangerouslySetActionUrl:i,slotIndex:a,story:e}):"pin"===e.type?(0,O.jsx)(et.ZP,{authDesktopSurface:"FlashlightResultGrid",auxData:{search_identifier:u,image_signature:l.imageSignature},duploQueryRef:null,pin:e,pinId:e.id,slotIndex:a,viewData:{search_identifier:u},viewParameter:t,viewType:72}):null})({data:e,itemIdx:a}),scrollContainer:()=>window}),(0,O.jsx)(_.$j,{accessibilityLabel:i._('Loading search results...', 'FlashlightResultGrid.spinner', 'Accessibility label for loading visual search results'),show:s||!u||!n})]})}var eC=a(136359),eE=a(589564),eI=a(597553),eD=a(306320),eR=a(400119),eK=a(412421),eL=a(561916);function eA({categoryFilters:e,cropSource:t,handleCategoryChange:a,viewParameter:i,viewType:n}){let{logContextEvent:l}=(0,A.v)(),r=(0,v.ZP)(),[s,o]=(0,h.useState)(!0);return(0,O.jsxs)(h.Fragment,{children:[(0,O.jsxs)(_.kC,{alignItems:"center",justifyContent:"between",children:[(0,O.jsx)(_.xv,{weight:"bold",children:r._('Product category', 'filter.category.header', 'Header of product category filter containing filter options')}),(0,O.jsx)(_.xu,{flex:"none",children:(0,O.jsx)(_.hU,{accessibilityLabel:r._('Product category', 'filter.category.button', 'accessibility label for the icon button to open or close domain filter'),icon:s?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{o(!s),l({event_type:101,component:13535,element:11547,view_type:n,view_parameter:i,aux_data:{commerce_data:JSON.stringify({filter:s?"collapsed":"expanded"})}}),s||l({event_type:13,component:13535,view_type:n,view_parameter:i,aux_data:{commerce_data:JSON.stringify({source:(0,eL.Z)({cropSource:t,viewType:n})})}})},size:"sm"})})]}),s?(0,O.jsx)(h.Fragment,{children:e.slice(0,5).map((e,t)=>(0,O.jsxs)(_.xu,{alignItems:"center",direction:"row",display:"flex",marginBottom:3,children:[(0,O.jsx)(_.xu,{flex:"grow",children:(0,O.jsx)(_.xv,{children:e.label.charAt(0).toUpperCase()+e.label.slice(1)})}),(0,O.jsx)(_.xu,{children:(0,O.jsx)(_.hU,{accessibilityLabel:r._('Category Filter Option', 'filter.category.option', 'Accessibility label for radio button of category filter choices'),icon:e.checked?"check-circle":"circle",iconColor:"darkGray",onClick:()=>a(t),size:"sm"})})]},e.label))}):(0,O.jsx)(_.xu,{width:"80%",children:(0,O.jsx)(_.xv,{color:"subtle",size:"200",children:function(e=[],t){let a=e.filter(e=>e.checked),i=a.length;return 0===i?t._('All', 'filter.category.applied', 'text indicates that no categories filter is currently applied for filtering'):`(${i}) ${a.map(e=>e.label).join(", ")}`}(e,r)})})]})}var eZ=a(490972);function eO(e,t){return e.filter(e=>e.checked).map(e=>e[t]).join(",")}function eM(e){return e.map(e=>({...e,checked:!1}))}function eN({listOfAvailableFiltersFromAPI:e,appliedFilterValues:t,key:a,component:i,viewType:n,viewParameter:l}){let{logContextEvent:r}=(0,A.v)(),[s,o]=(0,h.useState)([]),[d,u]=(0,h.useState)(""),[c,p]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{if(e){let i=eM(e),n=t?function(e,t,a){if(e){let i=decodeURI(e).split(",");return t.map(e=>i.includes(e[a])?{...e,checked:!0}:e)}return t}(t,i,a):i;o(n),u(eO(n,a))}},[e,t,a]),{filters:s,setFilters:o,submittedFilters:d,submitFilters:function(e){e!==d&&r({event_type:7472,component:i,view_type:n,view_parameter:l}),u(e),p(!1)},isFilterChanged:c,clearFilters:()=>eM(s),getSelected:e=>eO(e,a),handleFilterChange:function({index:e,pinId:t,auxCommerceData:u}){let c=!s[e].checked,g=[...s.slice(0,e),{...s[e],checked:c},...s.slice(e+1)];o(g),p(d!==eO(g,a)),r({event_type:101,component:i,element:11548,view_type:n,view_parameter:l,aux_data:{pin_id:t,commerce_data:JSON.stringify({[a]:s[e][a],select:c,...u})}})}}}function eU({categoryFilters:e,cropSource:t,domainFilters:a,drawerHeight:i,handleFilterChange:n,onSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,updateButtonText:d,width:u,viewParameter:c,viewType:p}){let{logContextEvent:g}=(0,A.v)(),m=(0,v.ZP)();(0,eh.Z)(()=>{g({event_type:13,component:13467,view_type:p,view_parameter:c,aux_data:{commerce_data:JSON.stringify({source:(0,eL.Z)({cropSource:t,viewType:p})})}})});let{category:y,domain:f,max:x,min:k}=o||{},{filters:S,setFilters:b,submittedFilters:w,submitFilters:P,isFilterChanged:F,clearFilters:j,getSelected:T,handleFilterChange:C}=eN({listOfAvailableFiltersFromAPI:a,appliedFilterValues:f,key:"domain",component:13469,viewType:p,viewParameter:c}),{filters:E,setFilters:I,submittedFilters:D,submitFilters:R,isFilterChanged:K,clearFilters:L,getSelected:Z,handleFilterChange:M}=eN({listOfAvailableFiltersFromAPI:e,appliedFilterValues:y,key:"label",component:13535,viewType:p,viewParameter:c}),[N,U]=(0,h.useState)(s),[z,B]=(0,h.useState)(-1),[H,V]=(0,h.useState)(-1),[G,W]=(0,h.useState)(-1),[$,Y]=(0,h.useState)(-1),[Q,q]=(0,h.useState)(!1);(0,h.useEffect)(()=>{if(!s||x&&k||U(s),k){let e=parseInt(k,10);Y(e),V(e)}else V(s?.min_value??-1),Y(s?.min_value??-1);if(x){let e=parseInt(x,10);W(e),B(e)}else B(s?.max_value??-1),W(s?.max_value??-1)},[s,x,k]);let{max_value:X,min_value:J,currency_type:ee}=N||{},et=e=>t=>{let a,i;let n=0>(t||0)?0:t;n&&g({event_type:7472,component:13468,view_type:p,view_parameter:c});let l=!1;"max"===e?(a=n||X,-1===(i=H)&&(i=J),i>a&&(i=Math.max(a-eD.$,0))):(i=n||0,-1===(a=z)&&(a=X),a<i&&(a=i+eD.$)),q(l=l||$!==i||G!==a),V(i),B(a)};(0,h.useEffect)(()=>{d&&d(function({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:i},n){let l=n._('Filters', 'Filter icon button to open drawer containing price filter and domain filters on related products feed', 'Filter icon button to open drawer containing price filter and domain filters on related products feed'),r=function({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:i}){return(i||a?1:0)+(t?t.split(",").length:0)+(e?e.split(",").length:0)}({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:i}),s=r>0?` (${r})`:"";return`${l}${s}`}({categoryFilters:D,domainFilters:w,maxPrice:-1===G||G===X?void 0:G,minPrice:-1===$||$===J?void 0:$},m))},[m,G,$,D,w,d,X,J]);let ea=({categoryParam:e,domainParam:t,maxPrice:a,minPrice:i})=>{n({categoryParam:e,domainParam:t,maxPrice:-1!==a?a:void 0,minPrice:-1!==i?i:void 0}),W(a),Y(i),q(!1),(G!==a||$!==i)&&g({event_type:7472,component:13468,view_type:p,view_parameter:c}),P(t),R(e);let r=-1!==a,s=""!==t,o=""!==e,d=-1!==i?i.toString():"",u=r?a.toString():"",m=s?encodeURI(t):"",h=o?encodeURI(e):"";l&&l({category:h,domain:m,max:u,min:d})};return(0,O.jsxs)(h.Fragment,{children:[(0,O.jsxs)(_.xu,{direction:"column",display:"flex",height:i-50-70,overflow:"scroll",paddingX:1,paddingY:1,width:"100%",children:[(0,O.jsxs)(_.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,O.jsx)(_.xv,{weight:"bold",children:m._('Filter', 'shopping.filter.header', 'Header for the types of filters')}),(0,O.jsx)(_.zx,{onClick:()=>{B(-1),V(-1),b(j()),I(L()),ea({categoryParam:"",domainParam:"",maxPrice:-1,minPrice:-1}),g({event_type:101,component:13467,element:11545,view_type:p,view_parameter:c})},size:"md",text:m._('Clear all', 'filter.clear.button', 'Button to clear all set filters on product group filters')})]}),!!N&&-1!==H&&-1!==z&&(0,O.jsx)(eZ.Z,{children:(0,O.jsx)(eK.Z,{cropSource:t,currencyCode:ee,defaultMaxPrice:X,defaultMinPrice:J,disableAutoFormatOnChange:!0,handleMaxPriceChange:et("max"),handleMinPriceChange:et("min"),maxPrice:z,minPrice:H,uiType:"slider",viewParameter:c,viewType:p})}),!!E&&E.length>0&&4!==t&&(0,O.jsx)(eZ.Z,{children:(0,O.jsx)(eA,{categoryFilters:E,cropSource:t,handleCategoryChange:e=>{M({index:e,pinId:r})},viewParameter:c,viewType:p})}),!!S&&S.length>0&&(0,O.jsx)(eZ.Z,{children:(0,O.jsx)(eR.Z,{cropSource:t,filterOptions:S,handleFilterChange:e=>{C({index:e,pinId:r,auxCommerceData:{source:(0,eL.Z)({cropSource:t,viewType:p})}})},showVerifiedMerchants:!0,uiType:"check-circles",viewParameter:c,viewType:p})})]}),(0,O.jsx)(_.xu,{color:"default",display:"flex",justifyContent:"center",position:"fixed",width:u,children:(0,O.jsx)(_.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},direction:"row",display:"flex",paddingY:2,children:(0,O.jsx)(_.xu,{marginStart:2,children:(0,O.jsx)(_.sg,{span:6,children:(0,O.jsx)(_.zx,{color:"red",dataTestId:"confirm-filters-button",disabled:!(F||K||Q),onClick:()=>{let e=T(S);ea({categoryParam:Z(E),domainParam:e,maxPrice:z,minPrice:H}),g({event_type:101,component:13467,element:11546,view_type:p,view_parameter:c})},size:"md",text:m._('Apply', 'filter.apply.button', 'Button to submit all selected filter options'),type:"submit"})})})})})]})}function ez({categoryFilters:e,cropSource:t,domainFilters:a,isDrawerOpen:i,handleFilterChange:n,handleSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,topOffset:d=0,updateButtonText:u,viewParameter:c=3455,viewType:p}){let g=(0,eC.t)(),[m,y]=(0,h.useState)(0),f=()=>{y(window.innerHeight-g)};return(0,h.useEffect)(()=>(f(),window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}),[]),(0,O.jsx)(_.xu,{color:"default",dangerouslySetInlineStyle:{__style:{marginRight:i?0:-eI.pG,visibility:i?"visible":"hidden",top:g+d}},height:m,left:!0,paddingX:eI.VF,position:"fixed",width:eI.pG,zIndex:new _.Ry(2),children:(0,O.jsx)(eU,{categoryFilters:e,cropSource:t,domainFilters:a,drawerHeight:m,handleFilterChange:n,onSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,updateButtonText:u,viewParameter:c,viewType:p,width:eI.pG-eI.VF*eI.vc*2})})}let eB=void 0!==o?o:o=a(5915);function eH(e){let{checkExperiment:t}=(0,k.F)(),a=(0,y.k6)(),i=(0,y.TH)(),n=(0,v.ZP)(),l=(0,R.Z)(),{filters:r,pinKey:s,visualSearchFlashlightUnifiedResourceData:o,visualLiveSearchResourceData:d,visualLiveSearchProductFeedResourceData:u}=e,{cropArea:c,cropSource:p,entrySource:g,handleFilterChange:m,isProductPage:x,requestParams:S,searchQuery:b,submittedFilters:w,surfaceType:P,title:T,trafficSource:C}=l||{},{category_filters:E,domain_filters:I,price_filters:D}=r||{},K=(0,f.Z)(eB,s),{getNormalizedPinImage:A}=(0,F.Z)({pinKey:K,maxWidth:j.RZ}),Z=["stela","stl"].includes(P),{anyEnabled:M}=t("web_unified_visual_feed"),{anyEnabled:N}=t("web_flashlight_unified_feed"),{anyEnabled:U}=t("web_unified_visual_features_expansion"),z=function({cropSource:e,i18n:t,inFlashlightUFExperiment:a,inStelaUFExperiment:i,inUnifiedVisualFeaturesExpansion:n,isProductPage:l,surfaceType:r,title:s}){let o=t._('Image search', 'imageSearch.header', 'header explaining the results of image search'),d=t._('Shop the look', 'shopTheLook.header', 'User will see this Shop the look header when navigating from the Shop the look module'),u=(0,ey.nk)(t._('Shop {{ category }}', 'relatedProducts.stela.header', 'header for related products stela feed'),{category:(s||"").toLowerCase()}).join(""),c=4===e;if(l)return s;if("stl"===r)return c?d:o;let p=a&&"flashlight"===r,g=i&&["stela","stl"].includes(r);return n||p||g?c?"":o:c?u:o}({cropSource:p,i18n:n,inFlashlightUFExperiment:N,inStelaUFExperiment:M,inUnifiedVisualFeaturesExpansion:U,isProductPage:x,surfaceType:P,title:T}),[B,H]=(0,h.useState)(!1),[G,W]=(0,h.useState)(""),$=(0,Q.Z)(r),{state:q}=i||{},{internalNavigation:J=!1}=q||{},{width:ee,height:et,url:ea}=A(),ei=ee+L.n,en=B?0:12,el=(0,eC.t)(),er=(0,eE.Z)(),es=B?eI.pG:0,eo=x?0:ei+4*en,ed=!x&&M&&"stela"===P,ev=!x&&N&&"flashlight"===P,[ek,eS]=(0,h.useState)(0),eb=ek-er-es-eo-L.n;(0,eh.Z)(()=>{eS(window.innerWidth)}),(0,h.useEffect)(()=>{let e=(0,eg.Z)(()=>eS(window.innerWidth),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)});let eP=o?.data?.search_identifier||d?.data?.search_identifier||u?.data?.search_identifier||"",[eF,ej]=(0,h.useState)(eP);(0,h.useEffect)(()=>{eP&&eF!==eP&&ej(eP)},[eP,eF]);let eD=(0,h.useRef)(null),eR=0,eK="";(0,h.useEffect)(()=>(eD&&eD.current&&eK===K.entityId&&(eD.current.scrollTop=eR),()=>{eD&&eD.current&&(eR=eD.current.scrollTop,eK=K.entityId)}),[eD]);let eL=Z?427:"flashlight"===P?N&&x?427:72:427,eA=Z?4===p?3462:3455:"flashlight"===P?N&&4===p?3462:3050:3462,eZ=function({entrySource:e,isProductPage:t,pinKey:a,surfaceType:i,viewParameter:n,viewType:l}){let{checkExperiment:r}=(0,k.F)(),{anyEnabled:s}=r("web_unified_visual_feed"),{anyEnabled:o}=r("web_flashlight_unified_feed"),d=(0,f.Z)(ex,a),u=(0,ef.Z)(d)({default:{is_product_only_feed:"stl"===i||t}});if(s||o)return{view_type:l,view_parameter:n,aux_data:u};if(!["stela","stl"].includes(i))return{view_type:l,view_parameter:3050,view_data:{pin_id:d.entityId}};{let t=(d.visualObjects||[]).some(e=>e.isStela);return{view_type:l,view_parameter:n,view_data:{pin_id:d.entityId},aux_data:{commerce_data:JSON.stringify({entrypoint:e,pin_is_stela:t})}}}}({entrySource:g,isProductPage:x,pinKey:K,surfaceType:P,viewParameter:eA,viewType:eL});return(0,O.jsx)(ep.Z,{constraints:function({isProductPage:e,isStl:t,isUnifiedFeed:a}){return e?[]:!a||t?["visualSearchMainPinImageRender"]:a?["shoppingModuleRender","visualSearchMainPinImageRender"]:[]}({isProductPage:x,isStl:"stl"===P,isUnifiedFeed:N||M||U}),measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,O.jsx)(em.Z,{objectId:eF,view:eL,children:(0,O.jsx)(ec.Z,{log:eZ,children:(0,O.jsxs)(_.xu,{"data-test-id":"related-products",children:[(0,O.jsx)(V,{filtersText:G,handleDrawerClose:function(){H(!1)},handleDrawerOpen:function(){H(!0)},isDrawerOpen:B,isProductOnlyFeed:x,pinId:K.entityId,showFilter:!(ed||ev)&&Z&&$,title:z,viewParameter:eA,viewType:eL}),$&&(0,O.jsx)(ez,{categoryFilters:E,cropSource:p,domainFilters:I,handleFilterChange:m??(()=>{}),handleSubmit:function(){let e=(0,e_.Z)({cropArea:c,cropSource:p,isProductPage:x,pinId:K.entityId,requestParams:S,searchQuery:b,surfaceType:P,title:T,trafficSource:C});a.replace(e)},isDrawerOpen:B,pinId:K.entityId,priceFilters:D,submittedFilters:w,topOffset:60,updateButtonText:e=>{W(e)},viewParameter:eA,viewType:eL}),!x&&(0,O.jsx)(_.xu,{ref:eD,bottom:!0,dangerouslySetInlineStyle:{__style:{top:el+92,left:er+es,right:er+es}},height:"inherit",marginBottom:3,marginStart:en,overflow:"auto",position:"fixed",width:ei,children:(0,O.jsx)(Y,{cropArea:c,description:K.description??"",height:et,imageSignature:K.imageSignature||"",imageUrl:ea,pinId:K.entityId,pinKey:K,requestParams:S,showAnimation:!J&&"flashlight"===P,surfaceType:P,trafficSource:C,viewParameter:eA,width:ee})}),(0,O.jsxs)(_.xu,{dangerouslySetInlineStyle:{__style:{top:92,left:es+eo,right:es+eo}},paddingX:X.jC,position:"relative",width:eb,children:[o&&(0,O.jsx)(eu,{isFilterOpened:B,isProductOnlyFeed:x,pinKey:K,surfaceType:P,viewParameter:eA,viewType:eL,visualSearchFlashlightUnifiedResource:o}),!N&&d&&(0,O.jsx)(eT,{pinKey:K,viewParameter:eA,visualLiveSearchResourceData:d}),!N&&u&&(0,O.jsx)(ew,{visualLiveSearchProductFeedResourceData:u})]})]})})})})}let eV=void 0!==d?d:d=a(708537);function eG(e){let{legacySearchId:t,pinKey:a,resourceOptions:i,setLegacySearchId:n}=e,l=(0,f.Z)(eV,a),r=(0,K.Z)({name:"VisualLiveSearchProductFeedResource",options:i}),s=r.data?.search_identifier||"";return(0,h.useEffect)(()=>{n&&s&&t!==s&&n(s)}),(0,O.jsx)(eH,{pinKey:l,visualLiveSearchProductFeedResourceData:r})}let eW=void 0!==u?u:u=a(977546);function e$(e){let{legacySearchId:t,pinKey:a,resourceOptions:i,setLegacySearchId:n}=e,l=(0,f.Z)(eW,a),r=(0,K.Z)({name:"VisualLiveSearchResource",options:i}),s=r.data?.search_identifier||"";return(0,h.useEffect)(()=>{n&&s&&t!==s&&n(s)}),(0,O.jsx)(eH,{pinKey:l,visualLiveSearchResourceData:r})}var eY=a(8760);let eQ=void 0!==c?c:c=a(270886);function eq(e){let{pinKey:t,resourceOptions:a}=e,i=(0,f.Z)(eQ,t),{visualSearchFlashlightUnifiedResource:n,filters:l}=(0,eY.Z)({resourceOptions:a});return(0,O.jsx)(eH,{filters:l,pinKey:i,visualSearchFlashlightUnifiedResourceData:n})}let eX=void 0!==p?p:p=a(196227);function eJ({pinKey:e}){let{checkExperiment:t}=(0,k.F)(),a=(0,y.TH)(),i=(0,f.Z)(eX,e),{getInitialCropArea:n}=function({pinKey:e}){let t=(0,f.Z)(T,e),{getNormalizedPinImage:a}=(0,F.Z)({pinKey:t,maxWidth:j.RZ}),{width:i,height:n}=a();return{getInitialCropArea:(0,h.useCallback)(({initialCropArea:e})=>e||{x:P.S,y:P.S,w:i-2*P.S,h:n-2*P.S},[n,i])}}({pinKey:i}),{getNormalizedPinImage:l}=(0,F.Z)({pinKey:i,maxWidth:j.RZ}),{width:r,height:s}=l(),o=t("web_unified_visual_feed").anyEnabled||t("web_unified_visual_features_expansion").anyEnabled,d=t("web_flashlight_unified_feed").anyEnabled||t("web_unified_visual_features_expansion").anyEnabled,{cropSource:u,full_feed_title:c,surfaceType:p,category:g,domain:m,max:_,min:x,q:v,requestParams:S,rs:b}=(0,C.mB)(a.search),K=(0,E.Z)(Number(u))||5,L=n({initialCropArea:(0,w.Z)(a)}),A=a.pathname.includes("/products"),Z=p||"flashlight",M=A||"stl"===Z?"shopping":"flashlight",N=(0,I.Z)({cropSource:K,isProductPage:A,surfaceType:Z}),[U,z]=(0,h.useState)(parseInt(x,10)||null),[B,H]=(0,h.useState)(parseInt(_,10)||null),[V,G]=(0,h.useState)(m?decodeURI(m):null),[W,$]=(0,h.useState)(g?decodeURI(g):null);function Y({minPrice:e,maxPrice:t,domainParam:a,categoryParam:i}){z(e),H(t),G(a),$(i)}let Q={categories:W,crop:(0,D.Z)({cropArea:L,scaledWidth:r,scaledHeight:s}),crop_source:K,domains:V,entry_source:M,entrypoint:N,field_set_key:"shopping_grid_item",image_signature:i.imageSignature||void 0,is_shopping:function({cropSource:e,inStelaUFExperiment:t,isProductPage:a,surfaceType:i}){return!!a||4===e&&("stl"===i||"stela"===i&&!t)}({cropSource:K,inStelaUFExperiment:o,isProductPage:A,surfaceType:Z}),pin_id:i.entityId,price_max:B,price_min:U,request_params:S,source:b},q=(0,h.useMemo)(()=>({cropArea:L,cropSource:K,entrySource:M,handleFilterChange:Y,isProductPage:A,requestParams:S,searchQuery:v,submittedFilters:{category:g,domain:m,max:_,min:x},surfaceType:Z,title:c,trafficSource:b}),[g,L,K,m,M,A,_,x,S,v,Z,c,b]);if(!i)return null;let X="flashlight"!==Z||d?(0,O.jsx)(eq,{pinKey:i,resourceOptions:Q}):A?(0,O.jsx)(eG,{pinKey:i,resourceOptions:Q}):(0,O.jsx)(e$,{pinKey:i,resourceOptions:Q});return(0,O.jsx)(R.V,{value:q,children:X})}let e0=void 0!==g?g:g=a(194081),e1=void 0!==m?m:m=a(112649);function e2(){let{checkExperiment:e}=(0,k.F)(),t=(0,v.ZP)(),a=(0,y.$B)(),{pinId:i}=(0,b.Z)(a.params.id||""),n=e("auth_dweb_graphql_closeup_shop_pinResource").anyEnabled,l=(0,x.Z)({strategy:n?"GRAPHQL":"LEGACY",query:e0,variables:{pinId:i},options:{fetchPolicy:"store-or-network"},transformGraphQL:e=>e.v3GetPinQuery?.data,useGetLegacyData:()=>{let{data:e,isLoaded:t}=(0,S.Z)({name:"PinResource",getOptions:({routeData:{params:{id:e}}})=>({id:e,field_set_key:"detailed",fetch_visual_search_objects:!0})});return t&&e?e:null}}),r=(0,f.Z)(e1,l);return(0,O.jsx)(h.Suspense,{fallback:(0,O.jsx)(_.$j,{accessibilityLabel:t._('Loading Pin data', 'RelatedProductsPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:r&&(0,O.jsx)(eJ,{pinKey:r})})}},281871:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e,t,a,n=!1,l){return{privacy_filter:t?"secret":"public",sort:a||"last_pinned_to",field_set_key:"profile_grid_item",username:e,isRetrievalHub:n,filter_types:l}}},885837:(e,t,a)=>{a.d(t,{O:()=>s,Q:()=>o});var i=a(827625),n=a(945488),l=a(64819);let r=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],s={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:a,username:i,privacyFilter:n="all",filterAllPins:l=!1,filterShoppingList:r=!1,includeArchived:s=!0},o)=>({privacy_filter:n,sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:i,page_size:25,group_by:a?"mix_public_private":"visibility",include_archived:s,redux_normalize_feed:!0,filter_all_pins:l,filter_shopping_list:r,...o?{orbac_subject_id:o}:Object.freeze({})})},o=e=>r.reduce((t,a)=>{let r=[(0,l.N8)("profileBoards",(0,n.Z)(e,a))];return[!0,!1].forEach(t=>{[!0,!1].forEach(n=>{r.push((0,i.jB)(s.name,s.options({username:e,boardOrder:a,mixPublicSecret:t,filterStories:n})))})}),t.concat(r)},[])},265192:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(227258);function n(e,t){return a=>a((0,i.U)("BoardSectionResource",{options:{field_set_key:t||"board_page",section_id:e}}))}},821419:(e,t,a)=>{a.d(t,{Br:()=>u,Cr:()=>_,K8:()=>m,L1:()=>F,YQ:()=>P,ZP:()=>f,aX:()=>x,eo:()=>p,md:()=>c,oG:()=>g,oL:()=>v,of:()=>h,xQ:()=>y,xR:()=>w,yT:()=>d});var i=a(216167),n=a(481177),l=a(227258),r=a(827625),s=a(281871),o=a(885837);function d(e){return{type:"BOARD_UPDATE_COMPLETE",payload:{board:e}}}function u(e){return{type:"BOARD_PIN_COUNT_CHANGED",payload:e}}function c(e,t){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:t}}}function p({viewingUserId:e,viewingUsername:t,boardId:a,boardPinCount:i}){return{type:"BOARD_DELETE",payload:{viewingUserId:e,viewingUsername:t,boardId:a,boardPinCount:i}}}let g=(e,t)=>a=>a((0,l.U)("BoardResource",{options:{board_id:e,field_set_key:t}}));function m(e){return t=>{e&&(0,o.Q)(e).forEach(e=>{t(e)})}}let h=e=>({type:"BOARD_DISMISS_SENSITIVITY_SCREEN",payload:{boardId:e}}),y=e=>g(e,"pin_count"),_=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),f=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}});function x(e,t,a){let l={name:e,privacy:n.Z.BoardPrivacy.PUBLIC,username:t,...a?{orbac_subject_id:a}:Object.freeze({})};return e=>i.Z.create("BoardResource",l).callCreate().then(a=>{let i=a.resource_response.data;return e(t&&(0,r.jB)("BoardsResource",(0,s.Z)(t,!1))),i})}function v(e={},t,a){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:a}}let k=(e,t)=>({type:"BOARD_INVITE_DENIED_BY_VIEWER",payload:{boardId:e,userId:t}}),S=(e,t,a)=>({type:"BOARD_COLLABORATOR_DELETE",payload:{boardId:e,userId:t,viewingUser:a}}),b=(e,t,a,i)=>({type:"BOARD_COLLABORATOR_ADD",payload:{boardId:e,viewingUser:t,status:a,collaboratingUsers:i}}),w=(e,t,a)=>async n=>{n(k(e,t));let l=await i.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callDelete();return l.resource_response.error||a({event_type:29,object_id_str:e}),l},P=(e,t,a,n,l,r)=>async s=>{s(S(e,n?.id??"",a));try{(await i.Z.create("accepted"===t?"BoardCollaboratorResource":"BoardInviteResource",{board_id:e,field_set_key:"boardEdit",invited_user_id:n?.id??"",...r?{orbac_subject_id:r}:{}}).callDelete()).resource_response.error||l({event_type:"accepted"===t?25:29,object_id_str:e})}catch(i){s(b(e,a,t,[n]))}},F=(e,t,a,n)=>l=>{let r=i.Z.create("BoardResource",{board_id:a}).callDelete();return l(p({viewingUserId:e,viewingUsername:t,boardId:a,boardPinCount:n})),r}},70982:(e,t,a)=>{a.d(t,{KF:()=>u,ZN:()=>s,fv:()=>d,kE:()=>p,yA:()=>o});var i=a(216167),n=a(372085),l=a(386129);function r(e,t,a,n){return i.Z.create("UserFollowResource",{user_id:e,invite_code:n||void 0,aux_data:t?{pin_id:t}:void 0,client_tracking_params:a})}function s(e,t=null,a,i){return n=>{r(e,t,a,i).callCreate().catch(()=>n((0,l.P_)(e,!1))),n((0,l.P_)(e,!0))}}function o(e,t=null,a,i){return async n=>{n((0,l.P_)(e,!0)),await r(e,t,a,i).callCreate().catch(t=>{throw n((0,l.P_)(e,!1)),t})}}function d(e,t=null,a){return i=>{r(e,t,a).callDelete().catch(()=>i((0,l.P_)(e,!0))),i((0,l.P_)(e,!1))}}function u(e,t=null,a){return async i=>{i((0,l.P_)(e,!1)),await r(e,t,a).callDelete().catch(t=>{throw i((0,l.P_)(e,!0)),t})}}let c=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),p=e=>t=>{e.length>0&&((0,n.Z)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e.join(",")}}).catch(()=>t(c(e,!1))),t(c(e,!0)))}},386129:(e,t,a)=>{a.d(t,{Ge:()=>d,JS:()=>r,OF:()=>v,P_:()=>s,Q_:()=>p,b8:()=>g,eR:()=>x,h2:()=>u,h6:()=>c});var i=a(216167),n=a(372085),l=a(107905);function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let s=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),o=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),d=({id:e,orbacSubjectId:t,blockSource:a,blockContext:n,logContextEvent:l})=>async r=>{r(o(e,!0));let s=await i.Z.create("UserBlockResource",{blocked_user_id:e,orbac_subject_id:t,block_source:a,block_context:n}).callCreate().catch(()=>r(o(e,!1)));return l({event_type:54,object_id_str:e}),s},u=(e,t)=>async a=>{a(o(e,!1));let n=await i.Z.create("UserBlockResource",{blocked_user_id:e}).callDelete().catch(()=>a(o(e,!0)));return t({event_type:55,object_id_str:e}),n};function c(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let p=(e,t)=>()=>i.Z.create("UserStateResource",{state:e,value:t}).callCreate(),g=(e,t,a)=>(i,r)=>{(0,n.Z)({url:"/v3/users/me/",method:"POST"}).then(()=>{a({event_type:48,object_id_str:r().session.userId}),e(),(0,l.Z)()},t)},m=e=>e>=200&&e<400,h=(e,t="150x150")=>e&&`https://i.pinimg.com/${t}/${e.substring(0,2)}/${e.substring(2,4)}/${e.substring(4,6)}/${e}.jpg`||"",y=async(e,t,a)=>{let n=await i.Z.create("VIPResource",{upload_ids:[e]}).callGet();if(n.resource_response.data[e]){let{status:i,signature:l}=n.resource_response.data[e];"processing"===i||"registered"===i?setTimeout(async()=>{y(e,t,a)},5e3):"succeeded"===i?t(h(l)):a()}else a()},_=(e,t,a,n,l)=>(new FormData().append("img",e),i.Z.create("VIPResource",{type:t}).callCreate().then(t=>{if(t.resource_response.data){let{upload_id:i,upload_url:r,upload_parameters:s}=t.resource_response.data,o=new XMLHttpRequest;o.open("POST",r,!0),o.onload=()=>{m(o.status)?(a(100),y(i,n,l)):l()},o.upload.onprogress=e=>{a(Math.round(100*e.loaded/e.total))};let d=new FormData;for(let e in s)d.append(e,s[e]);d.append("file",e),o.send(d)}},()=>{l()})),f=e=>new Promise((t,a)=>{_(e,"pinimage",()=>{},e=>{t(e)},e=>{a(e)})}),x=e=>new Promise((t,a)=>{"string"==typeof e?e.startsWith("data")&&f(function(e,t=512){let a=e.split(";"),i=a[0].split(":")[1],n=atob(a[1].split(",")[1]),l=[];for(let e=0;e<n.length;e+=t){let a=n.slice(e,e+t),i=Array(a.length);for(let e=0;e<a.length;e+=1)i[e]=a.charCodeAt(e);let r=new Uint8Array(i);l.push(r)}return new Blob(l,{type:i})}(e)).then(e=>t(e)):a("Invalid Image")}),v=e=>(0,n.Z)({url:"/v3/register/exists/",data:{email:e}})},125768:(e,t,a)=>{a.d(t,{Z:()=>_});var i=a(545007),n=a(616550),l=a(883119),r=a(224796),s=a(587703),o=a(525364),d=a(696534),u=a(140017),c=a(741983),p=a(731714),g=a(217058),m=a(623409),h=a(554786),y=a(785893);function _({alignIconLeft:e,bgColor:t,color:a,disableRedirect:_=!1,fallbackUrl:f,icon:x="arrow-back",onTouch:v,padding:k,placement:S,shouldUseFallbackUrl:b,size:w="lg",viewParameter:P,viewType:F,isVisualSearch:j}){let T=(0,u.ZP)(),C=(0,n.k6)(),E=(0,n.TH)(),I=(0,h.HG)(),D=(0,i.v9)(e=>e.session.isAuthenticated),R=(0,s.Z)(),K=(0,m.Z)(),L=(0,d.vs)(),{viewType:A,viewParameter:Z}=(0,o.SU)(),[O,M]=F?[F,P]:[A,Z],N=()=>E.search&&E.search.includes("?nativeShouldDismiss=true"),U=()=>{let e=p.Z.getItem(r.pm);E.key||"/ideas"!==f?(0,g.My)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,g.My)("pinner_conversion.back_button.no_history"),(0,g.My)(`web_back_button_click.${String(S)}.is_auth_${String(D)}`),K({action:"click",item:"back-button"}),O&&R({view_type:O,view_parameter:M,element:34,event_type:102}),v&&v(),_||((!E.key||E.state&&"redirect"===E.state.referrer||b)&&f?C.push(f):E.pathname.includes("/password/reset/")&&N()?C.push("/login/?dismissWebview=true"):C.goBack())},z=L?d.t4:"white",B=(0,c.am)(E)||j||"white"===a;return(0,y.jsx)(l.xu,{"data-test-id":"back-button",children:e?(0,y.jsx)(l.xu,{alignItems:"center",display:"flex",height:48,marginStart:"cancel"===x?-1:-2,width:48,children:(0,y.jsx)(l.hU,{accessibilityLabel:T._('Back', 'navigation button', 'navigation button'),bgColor:t,icon:x,iconColor:!a&&(!t||["white","lightGray","transparent"].includes(t))?"gray":a,onClick:U,padding:"auto"!==k?k:2,size:w})}):(0,y.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:I||B?"":z}},rounding:"circle",children:(0,y.jsx)(l.hU,{accessibilityLabel:T._('Back', 'navigation button', 'navigation button'),bgColor:I?t:"transparent",icon:x,iconColor:!a&&(!t||["white","lightGray","transparent"].includes(t))?"gray":a,onClick:U,padding:"auto"!==k?k:2,size:w})})})}},29301:(e,t,a)=>{a.d(t,{Z:()=>i});function i({appliedFilters:e,article:t,autoCorrectionDisabled:a,filters:i,journeyDepth:n,query:l,scope:r,selectedOneBarModules:s,sourceId:o,sourceModuleId:d,topPinIds:u}){let c=[r,l,i,e,t,o,d,n,u].map(e=>e??"").join(":");return a&&(c+=":auto-correction-disabled"),s&&(c+=`:${s}`),c}},490972:(e,t,a)=>{a.d(t,{Z:()=>l});var i=a(883119),n=a(785893);function l({children:e}){return(0,n.jsx)(i.xu,{paddingY:4,children:e})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/35036-9286014b6a63ae0d.mjs.map